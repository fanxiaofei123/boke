<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="VacationRequest" Caption="请假单" FormType="Entity">
    <DataSource>
        <DataObject Key="VacationRequest" Caption="请假单" PrimaryTableKey="VacationRequest" PrimaryType="Entity">
            <TableCollection>
                <Table Key="VacationRequest" Caption="请假单">
                    <Column Key="OID" Caption="对象标识" DataType="Long"/>
                    <Column Key="SOID" Caption="主对象标识" DataType="Long"/>
                    <Column Key="POID" Caption="父对象标识" DataType="Long"/>
                    <Column Key="VERID" Caption="对象版本" DataType="Integer"/>
                    <Column Key="DVERID" Caption="对象明细版本" DataType="Integer"/>
                    <Column Key="EmpNO" Caption="员工工号" DataType="Long"/>
                    <Column Key="Name" Caption="姓名" DataType="Varchar"/>
                    <Column Key="StartTime" Caption="起始日期" DataType="DateTime"/>
                    <Column Key="EndTime" Caption="结束日期" DataType="DateTime"/>
                    <Column Key="VacationNum" Caption="请假天数" DataType="Integer"/>
                    <Column Key="Cause" Caption="事由" DataType="Integer"/>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <OperationCollection>
        <Operation Key="optKey1" Caption="保存" Enable="IsNewOrEdit();">
            <Action>
                <![CDATA[SaveData();UpdateView();]]>
            </Action>
        </Operation>
        <Operation Key="optKey2" Caption="删除" Visible="!IsNewOrEdit();">
            <Action>
                <![CDATA[DeleteData();UpdateView();Close();]]>
            </Action>
        </Operation>
        <Operation Key="optKey3" Caption="编辑" Visible="!IsNewOrEdit();">
            <Action>
                <![CDATA[Edit();]]>
            </Action>
        </Operation>
        <Operation Key="optKey4" Caption="关闭" Visible="!IsNewOrEdit();">
            <Action>
                <![CDATA[Close();UpdateView();]]>
            </Action>
        </Operation>
        <Operation Key="optKey5" Caption="取消" Visible="IsNewOrEdit();">
            <Action>
                <![CDATA[Cancel();]]>
            </Action>
        </Operation>
    </OperationCollection>
    <Body>
        <Block>
            <FlexFlowLayoutPanel Key="main" Caption="根面板">
                <ToolBar Key="main_toolbar" Height="pref" Caption="main_toolbar">
                    <ToolBarItemCollection/>
                </ToolBar>
                <GridLayoutPanel Key="first_head" Padding="5px" Height="pref" Caption="基本信息">
                    <TextEditor Key="EmpNO" Caption="员工工号" BuddyKey="Lab_EmpNO" X="1" Y="0" XSpan="2">
                        <DataBinding TableKey="VacationRequest" ColumnKey="EmpNO"/>
                    </TextEditor>
                    <Label Key="Lab_EmpNO" Caption="员工工号" X="0" Y="0"/>
                    <TextEditor Key="Name" Caption="姓名" BuddyKey="Lab_Name" X="4" Y="0" XSpan="2">
                        <DataBinding TableKey="VacationRequest" ColumnKey="Name"/>
                    </TextEditor>
                    <Label Key="Lab_Name" Caption="姓名" X="3" Y="0"/>
                    <DatePicker Key="StartTime" Caption="起始日期" BuddyKey="Lab_StartTime" X="1" Y="1" XSpan="2">
                        <DataBinding TableKey="VacationRequest" ColumnKey="StartTime"/>
                    </DatePicker>
                    <Label Key="Lab_StartTime" Caption="起始日期" X="0" Y="1"/>
                    <DatePicker Key="EndTime" Caption="结束日期" BuddyKey="Lab_EndTime" X="4" Y="1" Enable="!IsNull(StartTime) &amp;&amp; IsNewOrEdit();" XSpan="2">
                        <DataBinding TableKey="VacationRequest" ColumnKey="EndTime" CheckRule="EndTime&gt;StartTime;" ErrorInfo="结束日期不能早于起始日期">
                            <ValueChanged>
                                <![CDATA[SetValue('VacationNum', DateDiff(StartTime, EndTime, 'd'));]]>
                            </ValueChanged>
                        </DataBinding>
                    </DatePicker>
                    <Label Key="Lab_EndTime" Caption="结束日期" X="3" Y="1"/>
                    <ComboBox Key="Cause" Caption="事由" BuddyKey="Lab_Cause" X="4" Y="2" XSpan="2">
                        <DataBinding TableKey="VacationRequest" ColumnKey="Cause"/>
                        <Item Caption="病假" Key="1" Value="0"/>
                        <Item Caption="事假" Key="2" Value="1"/>
                        <Item Caption="年假" Key="3" Value="2"/>
                    </ComboBox>
                    <Label Key="Lab_Cause" Caption="事由" X="3" Y="2"/>
                    <TextEditor Key="VacationNum" Caption="请假天数" BuddyKey="Lab_VacationNum" X="1" Y="2" Enable="false" XSpan="2">
                        <DataBinding TableKey="VacationRequest" ColumnKey="VacationNum"/>
                    </TextEditor>
                    <Label Key="Lab_VacationNum" Caption="请假天数" X="0" Y="2"/>
                    <RowDefCollection RowHeight="30" RowGap="6">
                        <RowDef/>
                        <RowDef/>
                        <RowDef/>
                        <RowDef/>
                    </RowDefCollection>
                    <ColumnDefCollection ColumnGap="20">
                        <ColumnDef Width="60px"/>
                        <ColumnDef Width="33%"/>
                        <ColumnDef Width="60px"/>
                        <ColumnDef Width="33%"/>
                        <ColumnDef Width="60px"/>
                        <ColumnDef Width="34%"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
</Form>
