<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="V_O_CalculateExpense_LRP" Caption="其它费用计算">
    <Body>
        <Block>
            <FlexFlowLayoutPanel Key="root" Caption="根面板">
                <GridLayoutPanel Key="first_head" Padding="5px" Height="pref" Caption="基本信息">
                    <Dict Key="WarehouseCenter" Caption="仓储中心" BuddyKey="Lab_WarehouseCenter" X="1" Y="0" AllowMultiSelection="true" ItemKey="LRP_WarehouseCenter" TabOrder="10" XSpan="3"/>
                    <Label Key="Lab_WarehouseCenter" Caption="仓储中心" X="0" Y="0"/>
                    <Dict Key="DispatchOrg" Caption="调度组织" BuddyKey="Lab_DispatchOrg" X="6" Y="0" AllowMultiSelection="true" ItemKey="LRP_DispatchOrg" TabOrder="20" XSpan="3"/>
                    <Label Key="Lab_DispatchOrg" Caption="调度组织" X="5" Y="0"/>
                    <Dict Key="Carrier" Caption="承运商" BuddyKey="Lab_Carrier" X="1" Y="1" AllowMultiSelection="true" ItemKey="LRP_Carrier" TabOrder="30" XSpan="3"/>
                    <Label Key="Lab_Carrier" Caption="承运商" X="0" Y="1"/>
                    <Dict Key="Customer" Caption="结算方" BuddyKey="Lab_Customer" X="6" Y="1" AllowMultiSelection="true" ItemKey="Vendor" TabOrder="40" XSpan="3"/>
                    <Label Key="Lab_Customer" Caption="结算方" X="5" Y="1"/>
                    <DatePicker Key="StartDate" Caption="日期范围起" BuddyKey="Lab_StartDate" X="1" Y="2" TabOrder="50" XSpan="3"/>
                    <Label Key="Lab_StartDate" Caption="日期范围起" X="0" Y="2"/>
                    <DatePicker Key="EndDate" Caption="至" BuddyKey="Lab_EndDate" X="6" Y="2" TabOrder="60" XSpan="3"/>
                    <Label Key="Lab_EndDate" Caption="至" X="5" Y="2"/>
                    <Button Key="Calculate" Caption="计算" X="10" Y="0" TabOrder="100">
                        <OnClick>
                            <![CDATA[
                            if(IsControlNull("WarehouseCenter") && IsControlNull("DispatchOrg")){
                            Confirm(LocaleString('CHshow','chkey27'),'OK');
                            return 0;
                            }
                            if(IsControlNull("Customer") && IsControlNull("Carrier")){
                            Confirm(LocaleString('CHshow','chkey32'),'OK');
                            return 0;
                            }
                            if (IsControlNull("StartDate") || IsControlNull("EndDate")) {
                            Confirm(LocaleString('CHshow','chkey31'),'OK');
                            return 0;
                            }



//后台计算
var r = InvokeService("LRP_O_CalculateExpense", false, false, GetJSONValue("WarehouseCenter"),GetJSONValue("DispatchOrg"),GetJSONValue("Carrier"),GetJSONValue("Customer"),GetValue("StartDate"),GetValue("EndDate"));
if (r == 1){
    Confirm(LocaleString('CHshow','chkey5'),'OK','OK:{}');
}
]]>
                        </OnClick>
                    </Button>
                    <Button Key="Reset" Caption="重置" X="10" Y="1" TabOrder="120">
                        <OnClick>
                            <![CDATA[//设置各条件字段为空
SetValue("WarehouseCenter","");
SetValue("DispatchOrg","");
SetValue("Customer","");
SetValue("Carrier","");
SetValue("StartDate", "");
SetValue("EndDate", "");
]]>
                        </OnClick>
                    </Button>
                    <RowDefCollection RowGap="8">
                        <RowDef Height="30px"/>
                        <RowDef Height="30px"/>
                        <RowDef Height="30px"/>
                    </RowDefCollection>
                    <ColumnDefCollection ColumnGap="8">
                        <ColumnDef Width="70px"/>
                        <ColumnDef Width="25%"/>
                        <ColumnDef Width="55px"/>
                        <ColumnDef Width="25%"/>
                        <ColumnDef Width="55px"/>
                        <ColumnDef Width="70px"/>
                        <ColumnDef Width="25%"/>
                        <ColumnDef Width="55px"/>
                        <ColumnDef Width="25%"/>
                        <ColumnDef Width="30px"/>
                        <ColumnDef Width="80px"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
</Form>
