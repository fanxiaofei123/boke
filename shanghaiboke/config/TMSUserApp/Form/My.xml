<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="My" FormType="Entity" Authenticate="false">
    <DataSource>
        <DataObject Caption="货主用户" Key="LRP_OwnerUser_View" PrimaryTableKey="LRP_OwnerUser">
            <TableCollection>
                <Table Caption="货主用户" DBTableName="USER_Operator" Key="LRP_OwnerUser" SourceType="Query" Persist="false">
                    <Column Key="Logo" Caption="头像路径" DataType="Varchar" Length="512"/>
                    <Column Key="Name" Caption="名称" DataType="Varchar" Length="200" Cache="true"/>
                    <Column Key="InviteCode" Caption="邀请码" DataType="Varchar" Length="40"/>
                    <TableFilter>
                        <![CDATA[USER_Operator.OID=?]]>
                    </TableFilter>
                    <ParameterCollection>
                        <Parameter Formula="GetUserOperator()"/>
                    </ParameterCollection>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <Body>
        <Block>
            <GridLayoutPanel Key="root_pnl">
                <Format BackColor="#f1f3f8"/>
                <TableView Key="root" X="0" Y="0">
                    <TableRowCollection>
                        <TableRow Key="r1">
                            <GridLayoutPanel Key="header" Height="200px">
                                <Format BackColor="#f1f3f8"/>
                                <Image Key="mylogo" Caption="我的头像" Stretch="true" ImageScaleType="Fit_XY" PromptImage="5.png" X="1" Y="1" BorderStyle="none">
                                    <DataBinding TableKey="LRP_OwnerUser" ColumnKey="Logo"/>
                                    <Format BackColor="#f1f3f8"/>
                                    <OnClick>
                                        <![CDATA[
											if ( !IsLogin() ) {
												Show('MyLogin')
											} else {
												Show('MyPersonalInfo')
											}
										]]>
                                    </OnClick>
                                </Image>
                                <Label Key="myTip" Caption="点击登录" X="1" Y="2">
                                    <DataBinding TableKey="LRP_OwnerUser" ColumnKey="Name"/>
                                    <Format ForeColor="#f14c52" HAlign="Center">
                                        <Font Size="14"/>
                                    </Format>
                                </Label>
                                <RowDefCollection>
                                    <RowDef Height="30px"/>
                                    <RowDef Height="120px"/>
                                    <RowDef Height="25px"/>
                                </RowDefCollection>
                                <ColumnDefCollection>
                                    <ColumnDef Width="50%"/>
                                    <ColumnDef Width="120px"/>
                                    <ColumnDef Width="50%"/>
                                </ColumnDefCollection>
                            </GridLayoutPanel>
                        </TableRow>
                        <TableRow Key="r2" SeparatorStyle="solid none" SeparatorColor="#dde0e7">
                            <LinearLayoutPanel Key="inviteFriend_panel" Height="52px" Orientation="Horizontal">
                                <Button Key="inviteFriend_icon" Icon="6.png" Width="30px" Height="auto" BorderStyle="none" Margin="12px">
                                    <Format BackColor="transparent" HighlightColor="Transparent"/>
                                </Button>
                                <Label Key="inviteFriend_label" Caption="邀请码" Width="10px" Weight="1.0" Height="auto">
                                    <Format ForeColor="#969696">
                                        <Font Size="16"/>
                                    </Format>
                                </Label>
                                <Button Key="inviteFriend_more" Icon="more_arrow.png" OnlyIcon="True" Width="20px" Height="auto" BorderStyle="none">
                                    <Format BackColor="transparent"/>
                                </Button>
                            </LinearLayoutPanel>
                            <RowClick>
                                <![CDATA[
									if(!IsLogin()){
										Show('MyLogin');
										return true;
									}
									PopView('InviteCode_pop');
									
							]]>
                            </RowClick>
                        </TableRow>
                        <TableRow Key="r12" SeparatorStyle="none none solid none" SeparatorColor="#cccccc">
                            <LinearLayoutPanel Key="MyPoints_panel" Height="52px" Orientation="Horizontal">
                                <Button Key="MyPoints_icon" Icon="yuu.png" Width="30px" Height="auto" BorderStyle="none" Margin="12px">
                                    <Format BackColor="transparent" HighlightColor="Transparent"/>
                                </Button>
                                <Label Key="MyPoints_label" Caption="我的积分" Width="10px" Weight="1.0" Height="auto">
                                    <Format ForeColor="#999999">
                                        <Font Size="15"/>
                                    </Format>
                                </Label>
                                <Button Key="MyPoints_more" Icon="more_arrow.png" OnlyIcon="True" Width="20px" Height="auto" BorderStyle="none">
                                    <Format BackColor="transparent"/>
                                </Button>
                            </LinearLayoutPanel>
                            <RowClick>
                                <![CDATA[
									Show('MyPoints');
							]]>
                            </RowClick>
                        </TableRow>
                        <TableRow Key="r3" SeparatorStyle="none none solid none" SeparatorColor="#dde0e7">
                            <LinearLayoutPanel Key="service_center_panel" Height="52px" Orientation="Horizontal">
                                <Button Key="service_center_icon" Icon="6.png" Width="30px" Height="auto" BorderStyle="none" Margin="12px">
                                    <Format BackColor="transparent" HighlightColor="Transparent"/>
                                </Button>
                                <Label Key="service_center_label" Caption="我的常用路线" Width="10px" Weight="1.0" Height="auto">
                                    <Format ForeColor="#969696">
                                        <Font Size="16"/>
                                    </Format>
                                </Label>
                                <Button Key="service_center_more" Icon="more_arrow.png" OnlyIcon="True" Width="20px" Height="auto" BorderStyle="none">
                                    <Format BackColor="transparent"/>
                                </Button>
                            </LinearLayoutPanel>
                            <RowClick>
                                <![CDATA[Show('MyRoute')]]>
                            </RowClick>
                        </TableRow>
                        <TableRow Key="r4" SeparatorStyle="none none solid none" SeparatorColor="#dde0e7">
                            <LinearLayoutPanel Key="cooperation_panel" Height="52px" Orientation="Horizontal">
                                <Button Key="cooperation_icon" Icon="7.png" Width="30px" Height="auto" BorderStyle="none" Margin="12px">
                                    <Format BackColor="transparent" HighlightColor="Transparent"/>
                                </Button>
                                <Label Key="cooperation_label" Caption="收费标准" Width="10px" Weight="1.0" Height="auto">
                                    <Format ForeColor="#969696">
                                        <Font Size="16"/>
                                    </Format>
                                </Label>
                                <Button Key="cooperation_more" Icon="more_arrow.png" OnlyIcon="True" Width="20px" Height="auto" BorderStyle="none">
                                    <Format BackColor="transparent"/>
                                </Button>
                            </LinearLayoutPanel>
                            <RowClick>
                                <![CDATA[Show('ChargeStandards')]]>
                            </RowClick>
                        </TableRow>
                        <TableRow Key="r5" SeparatorStyle="none none solid none" SeparatorColor="#dde0e7">
                            <LinearLayoutPanel Key="contact_panel" Height="52px" Orientation="Horizontal">
                                <Button Key="contact_icon" Icon="8.png" Width="30px" Height="auto" BorderStyle="none" Margin="12px">
                                    <Format BackColor="transparent" HighlightColor="Transparent"/>
                                </Button>
                                <Label Key="contact_label" Caption="关于我们" Width="10px" Weight="1.0" Height="auto">
                                    <Format ForeColor="#969696">
                                        <Font Size="16"/>
                                    </Format>
                                </Label>
                                <Button Key="contact_more" Icon="more_arrow.png" OnlyIcon="True" Width="20px" Height="auto" BorderStyle="none">
                                    <Format BackColor="transparent"/>
                                </Button>
                            </LinearLayoutPanel>
                            <RowClick>
                                <![CDATA[Show('AboutUs')]]>
                            </RowClick>
                        </TableRow>
                    </TableRowCollection>
                </TableView>
                <GridLayoutPanel Key="Out_layout" X="0" Y="1" Height="50px" Visible="myTip!=''">
                    <Button Key="Out" Caption="退出当前登录" X="1" Y="0" Visible="myTip!=''">
                        <Format ForeColor="#ffffff" BackColor="#f14c52">
                            <Font Size="16"/>
                        </Format>
                        <OnClick>
                            <![CDATA[
							GuestLogout();LoadData();ShowToast('已注销当前登录');
						]]>
                        </OnClick>
                    </Button>
                    <RowDefCollection>
                        <RowDef Height="45px"/>
                    </RowDefCollection>
                    <ColumnDefCollection>
                        <ColumnDef Width="20px"/>
                        <ColumnDef Width="100%"/>
                        <ColumnDef Width="20px"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
                <RowDefCollection>
                    <RowDef Height="100%"/>
                    <RowDef Height="45px"/>
                </RowDefCollection>
                <ColumnDefCollection>
                    <ColumnDef Width="100%"/>
                </ColumnDefCollection>
            </GridLayoutPanel>
        </Block>
        <Block Root="false" Key="block_InviteCode_pop">
            <PopView Key="InviteCode_pop">
                <GridLayoutPanel Key="pop_spec_sel_panel">
                    <Format BackColor="#ffffff"/>
                    <TableView Key="InviteCode_root" X="0" Y="0">
                        <TableRowCollection>
                            <TableRow Key="InviteCode_r" SeparatorStyle="none none none none">
                                <LinearLayoutPanel Key="InviteCode_panel" Orientation="Horizontal">
                                    <TextEditor Key="InviteCode_code" Caption="邀请码" Enable="false" BorderStyle="none" Width="0px" Weight="1.0">
                                        <DataBinding TableKey="LRP_OwnerUser" ColumnKey="InviteCode"/>
                                        <Format>
                                            <Font Size="20"/>
                                        </Format>
                                    </TextEditor>
                                    <Button Key="copy_btn" Caption="复制" Width="77px" BorderStyle="none">
                                        <Format ForeColor="#ffffff" BackColor="#f14c52">
                                            <Font Size="16"/>
                                        </Format>
                                        <OnClick>
                                            <![CDATA[
											SetToClipboard(InviteCode_code);ShowToast("复制成功！");ClosePop('InviteCode_pop');
										]]>
                                        </OnClick>
                                    </Button>
                                </LinearLayoutPanel>
                            </TableRow>
                        </TableRowCollection>
                    </TableView>
                    <RowDefCollection>
                        <RowDef Height="50px"/>
                    </RowDefCollection>
                    <ColumnDefCollection>
                        <ColumnDef Width="100%"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
                <OnClose>
                    <![CDATA[
						ClosePop('InviteCode_pop');
					]]>
                </OnClose>
            </PopView>
        </Block>
    </Body>
    <OnLoad>
        <![CDATA[LoadData()]]>
    </OnLoad>
    <EventHandlerCollection>
        <EventHandler Key="SessionChanged" Trigger="Show" MergeEvent="true">
            <![CDATA[LoadData()]]>
        </EventHandler>
        <EventHandler Key="UserInfoChanged" Trigger="Show" MergeEvent="true">
            <![CDATA[LoadData()]]>
        </EventHandler>
    </EventHandlerCollection>
    <NavigationBar BackColor="#f14c52" Style="Custom">
        <BarItem Key="TitleCenter_bar" Caption="我的" Location="Center">
            <Label Key="TitleCenter" Caption="我的" Width="60px">
                <Format ForeColor="#ffffff" HAlign="Center">
                    <Font Size="20"/>
                </Format>
            </Label>
        </BarItem>
    </NavigationBar>
</Form>
