<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<DataObject Key="CHCS_Contract_Warning" Caption="合同有效期预警" PrimaryTableKey="CHCS_Contract_Warning">
    <TableCollection>
        <Table Key="CHCS_Contract_Warning" Caption="合同有效期预警" SourceType="Query" TableMode="Detail" Persist="false">
            <Column Key="OID" Caption="对象标识" DataType="Long"/>
            <Column Key="SOID" Caption="主对象标识" DataType="Long"/>
            <Column Key="POID" Caption="父对象标识" DataType="Long"/>
            <Column Key="VERID" Caption="对象版本" DataType="Integer"/>
            <Column Key="DVERID" Caption="对象明细版本" DataType="Integer"/>
            <Column Key="Contract_Code" Caption="合同编号" DataType="Varchar"/>
            <Column Key="Contract_Name" Caption="合同名称" DataType="Varchar"/>
            <Column Key="Supplier_NO" Caption="供应商编号" DataType="Varchar"/>
            <Column Key="Contract_Unit" Caption="供应商名称" DataType="Varchar"/>
            <Column Key="Supplier_Abbr" Caption="供应商简称" DataType="Varchar"/>
            <Column Key="Effective_Date" Caption="合同生效日期" DataType="Date"/>
            <Column Key="Expiration_Date" Caption="合同到期日期" DataType="Date"/>
            <Column Key="Maturity_Days" Caption="距离到期日天数" DataType="Integer" Precision="16" Scale="2"/>
            <Column Key="Warning_Level" Caption="预警级别" DataType="Long"/>
            <Statement>
                <![CDATA[select * from (select con.Contract_Code,con.Contract_Name,con.Supplier_NO,con.Contract_Unit,con.Supplier_Abbr,con.Effective_Date,con.Expiration_Date,IF(DATEDIFF(con.Expiration_Date,NOW())>0,DATEDIFF(con.Expiration_Date,NOW()),0) as Maturity_Days,warning.OID as Warning_Level from CHCS_Verdor_Contract con left join CHCS_Warn_Time_Set warning on IF(DATEDIFF(con.Expiration_Date,NOW())>0,DATEDIFF(con.Expiration_Date,NOW()),0) between warning.Warning_Area_Start and warning.Warning_Area_End  order by warning.code desc) a]]>
            </Statement>
        </Table>
    </TableCollection>
</DataObject>
