<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<DataObject Caption="拣货调整" Key="LRP_PickQtyChange">
    <TableCollection>
        <Table Caption="库存明细" Key="WM_QUANT" Persist="false" SourceType="Query" TableMode="Detail">
            <Column Caption="对象标识" DataType="Long" Key="OID"/>
            <Column Caption="主对象标识" DataType="Long" Key="SOID"/>
            <Column Caption="父对象标识" DataType="Long" Key="POID"/>
            <Column Caption="对象版本" DataType="Integer" Key="VERID"/>
            <Column Caption="对象明细版本" DataType="Integer" Key="DVERID"/>
            <Column Caption="状态" DataType="Integer" Key="Status"/>
            <Column Caption="物料" DataType="Long" Key="MaterialId"/>
            <Column Caption="单位" DataType="Varchar" Key="BasicUnit" Length="10"/>
            <Column Caption="批号" DataType="Varchar" Key="BatchNo" Length="100"/>
            <Column Caption="生产日期" DataType="Date" Key="ManufDate"/>
            <Column Caption="失效日期" DataType="Date" Key="ExpireDate"/>
            <Column Caption="入库日期" DataType="Date" Key="RecvDate"/>
            <Column Caption="项目" DataType="Long" Key="ProjectId"/>
            <Column Caption="字符型1" DataType="Varchar" Key="StrUserDef1" Length="100"/>
            <Column Caption="字符型2" DataType="Varchar" Key="StrUserDef2" Length="100"/>
            <Column Caption="字符型3" DataType="Varchar" Key="StrUserDef3" Length="100"/>
            <Column Caption="字符型4" DataType="Varchar" Key="StrUserDef4" Length="100"/>
            <Column Caption="字符型5" DataType="Varchar" Key="StrUserDef5" Length="100"/>
            <Column Caption="字典型1" DataType="Long" Key="DictUserDef1"/>
            <Column Caption="字典型2" DataType="Long" Key="DictUserDef2"/>
            <Column Caption="字典型3" DataType="Long" Key="DictUserDef3"/>
            <Column Caption="字典型4" DataType="Long" Key="DictUserDef4"/>
            <Column Caption="字典型5" DataType="Long" Key="DictUserDef5"/>
            <Column Caption="日期型1" DataType="Date" Key="DateUserDef1"/>
            <Column Caption="日期型2" DataType="Date" Key="DateUserDef2"/>
            <Column Caption="数值型1" DataType="Numeric" Key="NumUserDef1" Precision="18" Scale="6"/>
            <Column Caption="数值型2" DataType="Numeric" Key="NumUserDef2" Precision="18" Scale="6"/>
            <Column Caption="数值型3" DataType="Numeric" Key="NumUserDef3" Precision="18" Scale="6"/>
            <Column Caption="添加数量" DataType="Numeric" Key="AddQty" Precision="18" Scale="6"/>
            <Column Caption="在库量" DataType="Numeric" Key="OnhandQty" Precision="18" Scale="6"/>
            <Column Caption="分配量" DataType="Numeric" Key="AllocQty" Precision="18" Scale="6"/>
            <Column Caption="物料状态" DataType="Long" Key="MaterialStatusId"/>
            <Column Caption="仓间" DataType="Long" Key="StoreroomId"/>
            <Column Caption="库区" DataType="Long" Key="StoreareaId"/>
            <Column Caption="储位" DataType="Long" Key="LocationId"/>
            <Column Caption="周转容器号" DataType="Varchar" Key="HandingUnitNo" Length="100"/>
            <Column Caption="仓储中心" DataType="Long" Key="WarehouseCenterId"/>
            <Column Caption="相关单据明细id" DataType="Long" Key="RefLineOID"/>
            <ParameterCollection>
                <!--<Parameter DataType="Long" Formula="GetPara({Par_WarehouseCenterId})"/>
                <Parameter DataType="Long" Formula="GetPara({Par_MaterialId})"/> -->
				<Parameter DataType="Long" Formula="GetPara({Par_OwnerId})"/>
            </ParameterCollection>
            <Statement><![CDATA[select * from (select MaterialId,BatchNo,ManufDate,ExpireDate,RecvDate,ProjectId,StrUserDef1,StrUserDef2,StrUserDef3,StrUserDef4,StrUserDef5,DictUserDef1,
DictUserDef2,DictUserDef3,DictUserDef4,DictUserDef5,DateUserDef1,DateUserDef2,NumUserDef1,NumUserDef2,NumUserDef3,OnhandQty,ExpectOutQty as AllocQty,OnhandQty-ExpectOutQty as AddQty,MaterialStatusId,q.WarehouseCenterId,q.RefLineOID,
q.StoreroomId,q.StoreareaId,LocationId,q.HandingUnitNo,m.BasicUnit from LRP_Quant q join LRP_Location l on q.LocationId=l.oid join LRP_Material m on q.MaterialId = m.oid join LRP_Storearea sa on sa.oid = q.StoreareaId where OnhandQty-ExpectOutQty>0 and l.IsLocked=0 and sa.IsRecvArea=0 and sa.IsShipArea=0 and sa.IsSampleTestArea=0 and sa.IsKittingArea=0 and OwnerId = ?)a]]></Statement>
        </Table>
    </TableCollection>
    <OIDFilter/>
</DataObject>
