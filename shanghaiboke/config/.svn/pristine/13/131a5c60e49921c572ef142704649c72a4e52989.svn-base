<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="HistoryOrder">
    <DataSource>
        <DataObject Key="HistoryOrder" PrimaryTableKey="HistoryOrder">
            <TableCollection>
                <Table Key="HistoryOrder" SourceType="Query">
                    <Column Key="OID" Caption="对象标识" DataType="Long"/>
                    <Column Key="SOID" Caption="主对象标识" DataType="Long"/>
                    <Column Key="POID" Caption="父对象标识" DataType="Long"/>
                    <Column Key="VERID" Caption="对象版本" DataType="Integer"/>
                    <Column Key="DVERID" Caption="对象明细版本" DataType="Integer"/>
                    <Column Key="Status" Caption="状态" DataType="Integer"/>
                    <Column Key="No" Caption="订单号" DataType="Varchar" Length="100" SortType="Desc"/>
                    <Column Key="OwnerNo" Caption="货主单号" DataType="Varchar" Length="100"/>
                    <Column Key="OwnerId" Caption="货主id" DataType="Long"/>
                    <Column Key="OrderType" Caption="订单类型" DataType="Varchar" Length="10"/>
                    <Column Key="OperateType" Caption="运作类型" DataType="Integer"/>
                    <Column Key="DispatchOrgId" Caption="调度组织" DataType="Long"/>
                    <Column Key="OrderDateTime" Caption="下单日期时间" DataType="DateTime"/>
                    <Column Key="FinishDateTime" Caption="完成日期时间" DataType="DateTime"/>
                    <Column Key="SendOrgId" Caption="发站" DataType="Long"/>
                    <Column Key="DestOrgId" Caption="到站" DataType="Long"/>
                    <Column Key="Requirement" Caption="运输要求" DataType="Varchar" Length="1000"/>
                    <Column Key="RequireTruckTypeId" Caption="要求车型" DataType="Long"/>
                    <Column Key="RequireTruckQty" Caption="要求车辆数" DataType="Numeric" Precision="18" Scale="0"/>
                    <Column Key="ExpectArriveTime" Caption="预计送达时间" DataType="DateTime"/>
                    <Column Key="SendPartyId" Caption="发货方" DataType="Long"/>
                    <Column Key="SendPartyName" Caption="发货方名称" DataType="Varchar" Length="100"/>
                    <Column Key="SendProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="SendCityId" Caption="市" DataType="Long"/>
                    <Column Key="SendDistrictId" Caption="区" DataType="Long"/>
                    <Column Key="SendAddress" Caption="地址" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactor" Caption="联系人" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactTel" Caption="联系人电话" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactMobile" Caption="联系人手机" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactEmail" Caption="联系人电邮" DataType="Varchar" Length="100"/>
                    <Column Key="RecvPartyId" Caption="收货方" DataType="Long"/>
                    <Column Key="RecvPartyName" Caption="收货方名称" DataType="Varchar" Length="100"/>
                    <Column Key="RecvProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="RecvCityId" Caption="市" DataType="Long"/>
                    <Column Key="RecvDistrictId" Caption="区" DataType="Long"/>
                    <Column Key="RecvAddress" Caption="地址" DataType="Varchar" Length="100"/>
                    <Column Key="RecvContactor" Caption="联系人" DataType="Varchar" Length="100"/>
                    <Column Key="RecvContactTel" Caption="联系人电话" DataType="Varchar" Length="100"/>
                    <Column Key="RecvContactMobile" Caption="联系人手机" DataType="Varchar" Length="100"/>
                    <Column Key="RecvContactEmail" Caption="联系人电邮" DataType="Varchar" Length="100"/>
                    <Column Key="ReceiverPayType" Caption="收货方支付方式" DataType="Varchar" Length="100"/>
                    <Column Key="IsInvoice" Caption="是否开票" DataType="Integer"/>
                    <Column Key="IsInsure" Caption="是否投保" DataType="Integer"/>
                    <Column Key="CarrierId" Caption="承运商id" DataType="Long"/>
                    <Column Key="WaybillNo" Caption="运单号" DataType="Varchar" Length="100"/>
                    <Column Key="ReturnBillPcs" Caption="回单份数" DataType="Integer"/>
                    <Column Key="IsSelfPick" Caption="是否自提" DataType="Integer" DefaultValue="0"/>
                    <Column Key="IsSelfSend" Caption="发站自送" DataType="Integer" DefaultValue="0"/>
                    <Column Key="Amount" Caption="应收金额" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="ReturnAmount" Caption="应退金额" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="PromiseArriveTime" Caption="承诺送达时间" DataType="DateTime"/>
                    <Column Key="LastArriveTime" Caption="最后送达时间" DataType="DateTime"/>
                    <Column Key="DeliveryResult" Caption="配送结果" DataType="Varchar" Length="100"/>
                    <Column Key="DeliveryResultTime" Caption="配送结果操作时间" DataType="DateTime"/>
                    <Column Key="DeliveryMan" Caption="配送员" DataType="Varchar" Length="100"/>
                    <Column Key="DetainCause" Caption="滞留原因" DataType="Varchar" Length="1000"/>
                    <Column Key="TransferOrg" Caption="中转仓库" DataType="Long"/>
                    <Column Key="TransferInTime" Caption="中转仓库入库时间" DataType="DateTime"/>
                    <Column Key="TransferOutTime" Caption="中转仓库出库时间" DataType="DateTime"/>
                    <Column Key="AgencyFund" Caption="代收货款" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="AdvanceMoney" Caption="代垫货款" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="PayMethod" Caption="付款方式" DataType="Integer"/>
                    <Column Key="MaterialTypeId" Caption="物料类别" DataType="Long"/>
                    <Column Key="Remark" Caption="备注" DataType="Varchar" Length="1000"/>
                    <Column Key="GenMethod" Caption="订单生成方式" DataType="Integer" DefaultValue="1"/>
                    <Column Caption="物流订单号" DataType="Varchar" Key="LogisticsOrderNo" Length="40"/>
                    <Column Caption="物流订单步骤明细OID" DataType="Long" Key="LogisticsOrderStepOID"/>
                    <Column Key="OwnerUserId" Caption="货主用户" DataType="Long"/>
                    <Column Key="Mileage" Caption="里程数" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="UserRating" Caption="用户打分" DataType="Varchar" Length="40"/>
                    <Column Key="UserScore" Caption="用户评分" DataType="Integer"/>
                    <Column Key="UserComment" Caption="用户评价" DataType="Varchar" Length="200"/>
                    <Column Key="MaterialId" Caption="物料" DataType="Long"/>
                    <Column Key="MaterialName" Caption="物料名称" DataType="Varchar" Length="100"/>
                    <Column Key="Qty" Caption="数量" DataType="Numeric" Precision="10" Scale="0" DefaultValue="0"/>
                    <Column Key="Unit" Caption="单位" DataType="Varchar" Length="100"/>
                    <Column Key="Weight" Caption="重量" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="Cubage" Caption="体积" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="Package" Caption="包装" DataType="Varchar" Length="100"/>
                    <Column Key="SumFreight" Caption="运费" DataType="Numeric" DefaultValue="0" Precision="18" Scale="2"/>
                    <Column Key="DeliveryFee" Caption="送货费" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="OtherFee" Caption="其它金额" DataType="Numeric" Precision="18" Scale="6" DefaultValue="0"/>
                    <Column Key="MaterialValue" Caption="申明价值" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="Insurance" Caption="保险费" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="PickFee" Caption="提货费" DataType="Numeric" Precision="18" Scale="6" DefaultValue="0"/>
                    <Column Key="AddressName" Caption="地址名称" DataType="Varchar" Length="40"/>
                    <Column Key="ProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="CityId" Caption="市" DataType="Long"/>
                    <Column Key="DistrictId" Caption="区" DataType="Long"/>
                    <Column Key="Address" Caption="详细地址" DataType="Varchar" Length="100"/>
                    <Column Key="Contact" Caption="联系人" DataType="Varchar" Length="40"/>
                    <Column Key="Tel" Caption="联系电话" DataType="Varchar" Length="40"/>
                    <Column Key="Latitude" Caption="经度" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="Longitude" Caption="纬度" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="ServiceId" Caption="物流服务" DataType="Long"/>
                    <Column Key="IncomeId" Caption="收入id" DataType="Long"/>
                    <Column Key="SumServiceAmount" Caption="金额" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="Driver" Caption="司机" DataType="Varchar"/>
                    <Column Key="DriverMobile" Caption="司机电话" DataType="Varchar"/>
                    <Column Key="TruckLicenseNo" Caption="车牌号" DataType="Varchar"/>
                    <Column Key="SignDateTime" Caption="签收时间" DataType="DateTime"/>
                    <Column Key="Image3" DataType="Varchar"/>
                    <Column Key="Image4" DataType="Varchar"/>
                    <TableFilter>
                        <![CDATA[oid = ?]]>
                    </TableFilter>
                    <ParameterCollection>
                        <Parameter Formula="Para('HistoryOrderOID');" DataType="Long"/>
                    </ParameterCollection>
                    <Statement>
                        <![CDATA[SELECT OID,
  NO,
  SendAddress,
  SendPartyName,
  RecvAddress,
  RecvPartyName,
  OrderDateTime,
  SignDateTime,
  SumFreight,
  SumServiceAmount,
  RequireTruckTypeId,
  UserRating,
  UserComment
FROM
  (SELECT h.OID,
    h.NO,
    h.SendAddress,
    h.SendPartyName,
    h.RecvPartyName,
    h.RecvAddress,
    h.OrderDateTime,
    SUM(l.Freight) SumFreight,
    h.RequireTruckTypeId,
    h.UserRating,
    h.UserComment,
    h.UserScore
  FROM LRP_TransportOrder_H h
  LEFT JOIN LRP_TransportMaterial_L l
  ON h.OID = l.SOID
  GROUP BY h.OID,
    h.NO,
    h.SendAddress,
    h.SendPartyName,
    h.RecvPartyName,
    h.RecvAddress,
    h.OrderDateTime,
    h.RequireTruckTypeId,
    h.UserRating,
    h.UserComment,
    h.UserScore
  ) a
LEFT JOIN
  (SELECT s.SOID,
    SUM(s.ServiceAmount) SumServiceAmount
  FROM LRP_TransportOrderService_L s
  GROUP BY s.SOID
  )b
ON a.OID = b.SOID
LEFT JOIN
  (SELECT tjh.OrderNo,
    MAX(tjh.FinishDateTime) SignDateTime
  FROM LRP_TransportJob_H tjh
  GROUP BY tjh.OrderNo
  )c
ON c.OrderNo = a.NO]]>
                    </Statement>
                </Table>
                <Table Key="TransportOrderRoute" Caption="途径信息" TableMode="Detail" SourceType="Query">
                    <Column Key="OID" Caption="对象标识" DataType="Long"/>
                    <Column Key="SOID" Caption="主对象标识" DataType="Long"/>
                    <Column Key="POID" Caption="父对象标识" DataType="Long"/>
                    <Column Key="VERID" Caption="对象版本" DataType="Integer"/>
                    <Column Key="DVERID" Caption="对象明细版本" DataType="Integer"/>
                    <Column Key="AddressName" Caption="地址名称" DataType="Varchar" Length="40"/>
                    <Column Key="ProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="CityId" Caption="市" DataType="Long"/>
                    <Column Key="DistrictId" Caption="区" DataType="Long"/>
                    <Column Key="Address" Caption="详细地址" DataType="Varchar" Length="100"/>
                    <Column Key="Contact" Caption="联系人" DataType="Varchar" Length="40"/>
                    <Column Key="Tel" Caption="联系电话" DataType="Varchar" Length="40"/>
                    <Column Key="Latitude" Caption="经度" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="Longitude" Caption="纬度" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="AddressType" Caption="地址类型" DataType="Integer"/>
                    <TableFilter>
                        <![CDATA[soid=?]]>
                    </TableFilter>
                    <ParameterCollection>
                        <Parameter Formula="Para('HistoryOrderOID');" DataType="Long"/>
                    </ParameterCollection>
                    <Statement>
                        <![CDATA[select 
    OID,
    SOID,
    AddressName,
    ProvinceId,
    CityId,
    DistrictId,
    Address,
    Contact,
    Tel,
    Latitude,
    Longitude,
   AddressType
from
    LRP_TransportOrderRoute_L
where AddressType = 50]]>
                    </Statement>
                </Table>
                <Table Key="DriverMassage" Caption="司机信息" TableMode="Detail" SourceType="Query">
                    <Column Key="OID" Caption="对象标识" DataType="Long"/>
                    <Column Key="SOID" Caption="主对象标识" DataType="Long"/>
                    <Column Key="POID" Caption="父对象标识" DataType="Long"/>
                    <Column Key="VERID" Caption="对象版本" DataType="Integer"/>
                    <Column Key="DVERID" Caption="对象明细版本" DataType="Integer"/>
                    <Column Key="TruckLicenseNo" Caption="车牌号" DataType="Varchar"/>
                    <Column Key="Driver" Caption="司机" DataType="Varchar"/>
                    <Column Key="DriverMobile" Caption="司机手机" DataType="Varchar"/>
                    <TableFilter>
                        <![CDATA[tdhOID > 0 and oid = ?]]>
                    </TableFilter>
                    <ParameterCollection>
                        <Parameter Formula="Para('HistoryOrderOID');" DataType="Long"/>
                    </ParameterCollection>
                    <Statement>
                        <![CDATA[select 
    oid, tdhOID, Driver, DriverMobile, TruckLicenseNo
from
    (select 
        h.oid oid,
            tdh.OID tdhOID,
            Driver,
            DriverMobile,
            TruckLicenseNo
    from
        LRP_TransportOrder_H h
    left join LRP_TransportJob_H tjh ON tjh.OrderNo = h.NO
    left join LRP_TransportDJ_L tl ON tl.TJId = tjh.OID
    left join LRP_TransportDispatch_H tdh ON tdh.OID = tl.SOID) a]]>
                    </Statement>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <ScriptCollection>
        <Script Key="FormActive" Range="Action" Verb="">
            <![CDATA[LoadData()]]>
        </Script>
    </ScriptCollection>
    <Body>
        <Block>
            <TableView Key="info_table" X="0" Y="1">
                <TableRowCollection>
                    <TableRow Key="r1" TopMargin="10px">
                        <GridLayoutPanel Key="detail_panel1" Height="pref" LeftMargin="5px">
                            <Label Key="OrderMessage" Caption="订单信息" X="3" Y="2" XSpan="4">
                                <Format ForeColor="#cc3333">
                                    <Font Size="15" Bold="true"/>
                                </Format>
                            </Label>
                            <Label Key="SendAddress" X="4" Y="4" Enable="false" XSpan="3">
                                <DataBinding ColumnKey="SendPartyName" TableKey="HistoryOrder"/>
                            </Label>
                            <Label Key="Lab_SendAddress" Caption="始发地" X="3" Y="4"/>
                            <Label Key="NO" X="4" Y="3" XSpan="3">
                                <DataBinding ColumnKey="No" TableKey="HistoryOrder"/>
                            </Label>
                            <Label Key="Lab_NO" Caption="订单编号" X="3" Y="3"/>
                            <Label Key="Label1" X="0" Y="0" XSpan="7">
                                <Format BackColor="#e6e6e6"/>
                            </Label>
                            <Image Key="Image1" X="1" Y="2" Image="3-1.png" ImageScaleType="Fit_XY" SourceType="Resource" Stretch="true" Padding="5px"/>
                            <RowDefCollection>
                                <RowDef Height="10px"/>
                                <RowDef Height="10px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                            </RowDefCollection>
                            <ColumnDefCollection>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="30px"/>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="70px"/>
                                <ColumnDef Width="90px"/>
                                <ColumnDef Width="100%"/>
                                <ColumnDef Width="120px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TableRow>
                    <TableRow Key="r2" RowType="Detail" TableKey="TransportOrderRoute">
                        <GridLayoutPanel Key="detail_panel11" Height="pref" LeftMargin="5px">
                            <Label Key="RouteAddressName" X="4" Y="0" XSpan="3">
                                <DataBinding ColumnKey="AddressName"/>
                            </Label>
                            <Label Key="Lab_RouteAddressName" Caption="途径地" X="3" Y="0"/>
                            <RowDefCollection>
                                <RowDef Height="30px"/>
                            </RowDefCollection>
                            <ColumnDefCollection>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="30px"/>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="70px"/>
                                <ColumnDef Width="90px"/>
                                <ColumnDef Width="100%"/>
                                <ColumnDef Width="120px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TableRow>
                    <TableRow Key="r3">
                        <GridLayoutPanel Key="detail_panel12" Height="pref" LeftMargin="5px">
                            <Label Key="Lab_RecvAddress" Caption="目的地" X="3" Y="0"/>
                            <DatePicker Key="OrderDataTime" X="4" Y="1" Enable="false" XSpan="3" Format="MM月dd日 HH:mm">
                                <DataBinding ColumnKey="OrderDateTime" TableKey="HistoryOrder"/>
                                <Format HAlign="Left">
                                    <Font Name="Microsoft YaHei"/>
                                </Format>
                            </DatePicker>
                            <Label Key="Lab_OrderDataTime" Caption="下单时间" X="3" Y="1"/>
                            <DatePicker Key="SignDateTime" X="4" Y="2" Enable="false" Format="MM月dd日 HH:mm" XSpan="3">
                                <DataBinding ColumnKey="SignDateTime" TableKey="HistoryOrder"/>
                                <Format HAlign="Left"/>
                            </DatePicker>
                            <Label Key="Lab_FinishDateTime" Caption="签收时间" X="3" Y="2"/>
                            <Label Key="RecvAddress" X="4" Y="0" XSpan="3">
                                <DataBinding ColumnKey="RecvPartyName" TableKey="HistoryOrder"/>
                            </Label>
                            <RowDefCollection>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                            </RowDefCollection>
                            <ColumnDefCollection>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="30px"/>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="70px"/>
                                <ColumnDef Width="90px"/>
                                <ColumnDef Width="100%"/>
                                <ColumnDef Width="120px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TableRow>
                    <TableRow Key="r4" TopMargin="10px">
                        <GridLayoutPanel Key="detail_panel2" Height="pref" LeftMargin="5px">
                            <Label Key="Price" Caption="价格信息" X="3" Y="2" XSpan="5">
                                <Format ForeColor="#cc3333">
                                    <Font Size="15" Bold="true"/>
                                </Format>
                            </Label>
                            <NumberEditor Key="Freight" Enable="false" Precision="18" BorderStyle="none" X="4" Y="3" XSpan="4">
                                <DataBinding ColumnKey="SumFreight" TableKey="HistoryOrder"/>
                                <Format BackColor="transparent"/>
                            </NumberEditor>
                            <Label Key="Lab_Freight" Caption="运费" X="3" Y="3"/>
                            <Label Key="Label2" X="0" Y="0" XSpan="8">
                                <Format BackColor="#e6e6e6"/>
                            </Label>
                            <Image Key="Image2" X="1" Y="2" Image="3-1.png" ImageScaleType="Fit_XY" SourceType="Resource" Stretch="true" Padding="5px"/>
                            <RowDefCollection>
                                <RowDef Height="10px"/>
                                <RowDef Height="10px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="40px"/>
                            </RowDefCollection>
                            <ColumnDefCollection>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="30px"/>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="70px"/>
                                <ColumnDef Width="90px"/>
                                <ColumnDef Width="100%"/>
                                <ColumnDef Width="120px"/>
                                <ColumnDef Width="5px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TableRow>
                    <TableRow Key="r5">
                        <GridLayoutPanel Key="detail_panel5" Height="pref" LeftPadding="5px">
                            <NumberEditor Key="OtherFee" Enable="false" Precision="18" BorderStyle="none" X="4" Y="0" XSpan="4">
                                <DataBinding ColumnKey="SumServiceAmount" TableKey="HistoryOrder"/>
                                <Format BackColor="transparent"/>
                            </NumberEditor>
                            <Label Key="Lab_OtherFee" Caption="额外费用" X="3" Y="0"/>
                            <NumberEditor Key="SumFee" Enable="false" Precision="18" BorderStyle="none" X="4" Y="1" XSpan="4">
                                <DataBinding DefaultFormulaValue="ToDecimal(GetValue('Freight')) + ToDecimal(GetValue('OtherFee'))"/>
                                <Format BackColor="transparent"/>
                            </NumberEditor>
                            <Label Key="Lab_SumFee" Caption="总费用" X="3" Y="1"/>
                            <RowDefCollection>
                                <RowDef Height="40px"/>
                                <RowDef Height="40px"/>
                            </RowDefCollection>
                            <ColumnDefCollection>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="30px"/>
                                <ColumnDef Width="70px"/>
                                <ColumnDef Width="90px"/>
                                <ColumnDef Width="100%"/>
                                <ColumnDef Width="120px"/>
                                <ColumnDef Width="5px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TableRow>
                    <TableRow Key="r6" TopMargin="10px">
                        <GridLayoutPanel Key="detail_panel3" Height="pref" BorderRadius="30" HasBorder="true" Margin="5px">
                            <Label Key="Truck" Caption="车辆信息" X="3" Y="2" XSpan="5">
                                <Format ForeColor="#cc3333">
                                    <Font Size="15" Bold="true"/>
                                </Format>
                            </Label>
                            <Dict Key="TruckTypeId" X="0" Y="3" Visible="false" ItemKey="LRP_TruckType">
                                <DataBinding ColumnKey="RequireTruckTypeId" TableKey="HistoryOrder"/>
                            </Dict>
                            <Label Key="Lab_TruckTypeId" Caption="车型" X="3" Y="3"/>
                            <NumberEditor Key="LoadWeight" Enable="false" Precision="18" BorderStyle="none" X="4" Y="4" XSpan="4">
                                <DataBinding TableKey="HistoryOrder" DefaultFormulaValue="GetDictValue('LRP_TruckType',TruckTypeId, 'LRP_TruckType.LoadWeight');"/>
                                <Format BackColor="transparent"/>
                            </NumberEditor>
                            <Label Key="Lab_NumberEditor2" Caption="载重" X="3" Y="4"/>
                            <Label Key="Cube" Enable="false" X="4" Y="5" XSpan="4">
                                <DataBinding TableKey="HistoryOrder" DefaultFormulaValue="GetDictValue('LRP_TruckType',TruckTypeId, 'LRP_TruckType.TruckLength')&amp;'*'&amp;GetDictValue('LRP_TruckType', TruckTypeId, 'LRP_TruckType.TruckWidth')&amp;'*'&amp;GetDictValue('LRP_TruckType', TruckTypeId, 'LRP_TruckType.TruckHeight');"/>
                                <Format BackColor="transparent"/>
                            </Label>
                            <Label Key="Lab_TextEditor1" Caption="长*宽*高" X="3" Y="5"/>
                            <Label Key="Name" X="4" Y="3" XSpan="4">
                                <DataBinding DefaultFormulaValue="GetDictValue('LRP_TruckType',TruckTypeId, 'LRP_TruckType.Name');"/>
                            </Label>
                            <TextEditor Key="OID" Caption="OID" X="0" Y="5" Visible="false">
                                <DataBinding ColumnKey="OID" TableKey="HistoryOrder"/>
                            </TextEditor>
                            <Label Key="Label3" X="0" Y="0" XSpan="8">
                                <Format BackColor="#e6e6e6"/>
                            </Label>
                            <Image Key="Image3" X="1" Y="2" Image="3-1.png" ImageScaleType="Fit_XY" Padding="5px" SourceType="Resource" Stretch="true">
                                <DataBinding ColumnKey="Image3" TableKey="HistoryOrder"/>
                            </Image>
                            <RowDefCollection>
                                <RowDef Height="10px"/>
                                <RowDef Height="10px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="40px"/>
                                <RowDef Height="40px"/>
                            </RowDefCollection>
                            <ColumnDefCollection>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="30px"/>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="70px"/>
                                <ColumnDef Width="90px"/>
                                <ColumnDef Width="100%"/>
                                <ColumnDef Width="120px"/>
                                <ColumnDef Width="5px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TableRow>
                    <TableRow Key="r7" TableKey="DriverMassage" RowType="Detail">
                        <LinearLayoutPanel Key="GridLayoutPanel1" Caption="GridLayoutPanel1" Height="pref" LeftMargin="5px">
                            <Label Key="TruckLicenseNo1" Caption="车牌号" Visible="GetCellValue('r7', -1, 'TruckLicenseNo')" LeftPadding="50px"/>
                            <Label Key="TruckLicenseNo" LeftPadding="10px">
                                <DataBinding ColumnKey="TruckLicenseNo"/>
                            </Label>
                            <Label Key="Driver1" Caption="司机" Visible="GetCellValue('r7', -1, 'Driver')" LeftPadding="10px"/>
                            <Label Key="Driver" LeftPadding="10px">
                                <DataBinding ColumnKey="Driver"/>
                            </Label>
                            <Label Key="DriverMobile1" Caption="司机手机" Visible="GetCellValue('r7', -1, 'DriverMobile')" LeftPadding="10px"/>
                            <Label Key="DriverMobile" LeftPadding="10px">
                                <DataBinding ColumnKey="DriverMobile"/>
                            </Label>
                        </LinearLayoutPanel>
                    </TableRow>
                    <TableRow Key="r8" TopMargin="10px">
                        <GridLayoutPanel Key="detail_panel4" Height="pref" BorderColor="#e6e6e6" BorderRadius="30" HasBorder="true" Margin="5px">
                            <Label Key="Map" Caption="订单评价" X="3" Y="2" XSpan="5">
                                <Format ForeColor="#cc3333">
                                    <Font Size="15" Bold="true"/>
                                </Format>
                            </Label>
                            <Image Key="UserRating" Caption="用户评价" BuddyKey="Lab_UserRating" X="4" Y="3" Enable="false" Visible="!IsNull(GetValue('UserRating')) " HasBorder="true" Stretch="true" ImageScaleType="Fit_XY" XSpan="2">
                                <DataBinding ColumnKey="UserRating" TableKey="HistoryOrder"/>
                            </Image>
                            <Label Key="Lab_UserRating" Caption="用户评价" X="3" Y="3"/>
                            <TextEditor Key="UserComment" Caption="用户评论" BuddyKey="Lab_UserComment" X="4" Y="5" Enable="false" XSpan="4" YSpan="3">
                                <DataBinding ColumnKey="UserComment" TableKey="HistoryOrder"/>
                                <Format HAlign="Left" BackColor="#ffffff" VAlign="Top">
                                    <Font Size="16"/>
                                </Format>
                            </TextEditor>
                            <Label Key="Lab_UserComment" Caption="用户评论" X="3" Y="5"/>
                            <Label Key="Label4" X="0" Y="0" XSpan="8">
                                <Format BackColor="#e6e6e6"/>
                            </Label>
                            <Image Key="Image4" X="1" Y="2" Image="3-1.png" ImageScaleType="Fit_XY" Padding="5px" SourceType="Resource" Stretch="true">
                                <DataBinding ColumnKey="Image4" TableKey="HistoryOrder"/>
                            </Image>
                            <RowDefCollection>
                                <RowDef Height="10px"/>
                                <RowDef Height="10px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="40px"/>
                                <RowDef Height="10px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                            </RowDefCollection>
                            <ColumnDefCollection>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="30px"/>
                                <ColumnDef Width="10px"/>
                                <ColumnDef Width="70px"/>
                                <ColumnDef Width="90px"/>
                                <ColumnDef Width="100%"/>
                                <ColumnDef Width="120px"/>
                                <ColumnDef Width="5px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TableRow>
                </TableRowCollection>
            </TableView>
        </Block>
    </Body>
    <OnLoad>
        <![CDATA[LoadData()]]>
    </OnLoad>
    <NavigationBar BackColor="#f14c52" Style="Custom">
        <BarItem Key="Centertitle" Caption="历史订单信息" Location="Center">
            <Label Key="TitleCenter" Caption="历史订单信息" Width="pref">
                <Format ForeColor="#ffffff" HAlign="Center">
                    <Font Size="20"/>
                </Format>
            </Label>
        </BarItem>
       <BarItem Caption="现在评价" Key="Centertitle1" Location="Right">
            <Button Key="TitleRight" Caption="评价" Visible="Length(UserRating)==0" Width="60px" EnableDependency="UserRating">
                <Format ForeColor="#ffffff" HAlign="Center" BackColor="Transparent" HighlightColor="Transparent">
                    <Font Size="13"/>
                </Format>
                <OnClick>
                    <![CDATA[var a = ToBool(IsNull(GetValue('UserRating')));
//ShowToast(a);
PushPara('OrderOID', OID);					 
Show("Evaluate");

				]]>
                </OnClick>
            </Button>
        </BarItem>
    </NavigationBar>
</Form>
