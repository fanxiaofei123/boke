<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Map Caption="按退货通知单快速上架" Key="ReturnNotice-Tx112" SrcDataObjectKey="LRP_ReturnNotice" TgtDataObjectKey="LRP_WMTx">
  <RelateDataMapColletion>
        <RelateDataMap Key="ReturnNotice-Tx103"/>
    </RelateDataMapColletion>
    <SourceTableCollection Height="1140" Width="312" X="70" Y="0">
        <SourceTable Key="LRP_ReturnNotice_H" TableKey="LRP_ReturnNotice_H" TargetTableKey="LRP_WMTx_H">
            <SourceField Definition="No" TargetFieldKey="NoticeNo"/>
			<SourceField Definition="No" TargetFieldKey="RefNo"/>
            <SourceField Definition="OwnerId" TargetFieldKey="OwnerId"/>
            <SourceField Definition="OwnerNo" TargetFieldKey="OwnerNo"/>
            <SourceField Definition="WarehouseCenterId" TargetFieldKey="WarehouseCenterId"/>
			<SourceField Definition="112" TargetFieldKey="TxTypeCode" Type="Const"/>
            <SourceField Definition="GetSessionPara('TxType_112')" TargetFieldKey="TxTypeId" Type="Formula"/>
			<SourceField Definition="ServerDate()" TargetFieldKey="TxDateTime" Type="Formula"/>
			<SourceField Definition="No" TargetFieldKey="SrcRefOrderNo" TargetTableKey="LRP_WMTx_L"/>
			<SourceField Definition="OID" TargetFieldKey="SrcRefSOID" TargetTableKey="LRP_WMTx_L"/>
        </SourceTable>
        <SourceTable Key="LRP_ReturnNotice_L" IsPrimary="true" TableKey="LRP_ReturnNotice_L" TargetTableKey="LRP_WMTx_L">
            <SourceField Definition="MaterialId" TargetFieldKey="MaterialId"/>
            <SourceField Definition="Qty" TargetFieldKey="Qty" EdgeType="Focus"/>
            <SourceField Definition="MaterialUnit" TargetFieldKey="MaterialUnit"/>
            <SourceField Definition="BatchNo" TargetFieldKey="DestBatchNo"/>
            <SourceField Definition="ManufDate" TargetFieldKey="DestManufDate"/>
            <SourceField Definition="ExpireDate" TargetFieldKey="DestExpireDate"/>
			<SourceField Definition="RecvDate" TargetFieldKey="DestRecvDate"/>
            <SourceField Definition="ProjectId" TargetFieldKey="DestProjectId"/>
            <SourceField Definition="StrUserDef1" TargetFieldKey="DestStrUserDef1"/>
            <SourceField Definition="StrUserDef2" TargetFieldKey="DestStrUserDef2"/>
            <SourceField Definition="StrUserDef3" TargetFieldKey="DestStrUserDef3"/>
            <SourceField Definition="StrUserDef4" TargetFieldKey="DestStrUserDef4"/>
            <SourceField Definition="StrUserDef5" TargetFieldKey="DestStrUserDef5"/>
            <SourceField Definition="DictUserDef1" TargetFieldKey="DestDictUserDef1"/>
            <SourceField Definition="DictUserDef2" TargetFieldKey="DestDictUserDef2"/>
            <SourceField Definition="DictUserDef3" TargetFieldKey="DestDictUserDef3"/>
            <SourceField Definition="DictUserDef4" TargetFieldKey="DestDictUserDef4"/>
            <SourceField Definition="DictUserDef5" TargetFieldKey="DestDictUserDef5"/>
            <SourceField Definition="DateUserDef1" TargetFieldKey="DestDateUserDef1"/>
            <SourceField Definition="DateUserDef2" TargetFieldKey="DestDateUserDef2"/>
            <SourceField Definition="NumUserDef1" TargetFieldKey="DestNumUserDef1"/>
            <SourceField Definition="NumUserDef2" TargetFieldKey="DestNumUserDef2"/>
            <SourceField Definition="NumUserDef3" TargetFieldKey="DestNumUserDef3"/>
            <SourceField Definition="StoreroomId" TargetFieldKey="DestStoreroomId"/>
            <SourceField Definition="StoreareaId" TargetFieldKey="DestStoreareaId"/>
            <SourceField Definition="LocationId" TargetFieldKey="DestLocationId"/>
            <SourceField Definition="MaterialStatusId" TargetFieldKey="DestMaterialStatusId"/>
			<SourceField Definition="OID" TargetFieldKey="SrcRefLineOID"/>
        </SourceTable>
    </SourceTableCollection>
    <TargetTableCollection Height="1170" Width="287" X="444" Y="0">
        <TargetTable Key="LRP_WMTx_H" TableKey="LRP_WMTx_H">
            <TargetField Definition="NoticeNo"/>
			<TargetField Definition="RefNo"/>
            <TargetField Definition="OwnerId"/>
            <TargetField Definition="OwnerNo"/>
            <TargetField Definition="WarehouseCenterId"/>
        </TargetTable>
        <TargetTable Key="LRP_WMTx_L" TableKey="LRP_WMTx_L">
		    <TargetField Definition="SrcRefOrderNo"/>
            <TargetField Definition="SrcRefSOID"/>
            <TargetField Definition="MaterialId"/>
            <TargetField Definition="Qty">
			<Feedback Condition="LRP_WMTx_H.Status &gt;= 900" DataObjectKey="LRP_ReturnNotice" FieldKey="RecvQty" OpSign="AddDelta" TableKey="LRP_ReturnNotice_L">
                    <PostTrigger>
                        <![CDATA[ ]]>
                    </PostTrigger>
              </Feedback>
			 </TargetField>
            <TargetField Definition="MaterialUnit"/>
            <TargetField Definition="DestBatchNo"/>
            <TargetField Definition="DestManufDate"/>
            <TargetField Definition="DestExpireDate"/>
			<TargetField Definition="DestRecvDate"/>
            <TargetField Definition="DestProjectId"/>
            <TargetField Definition="DestStrUserDef1"/>
            <TargetField Definition="DestStrUserDef2"/>
            <TargetField Definition="DestStrUserDef3"/>
            <TargetField Definition="DestStrUserDef4"/>
            <TargetField Definition="DestStrUserDef5"/>
            <TargetField Definition="DestDictUserDef1"/>
            <TargetField Definition="DestDictUserDef2"/>
            <TargetField Definition="DestDictUserDef3"/>
            <TargetField Definition="DestDictUserDef4"/>
            <TargetField Definition="DestDictUserDef5"/>
            <TargetField Definition="DestDateUserDef1"/>
            <TargetField Definition="DestDateUserDef2"/>
            <TargetField Definition="DestNumUserDef1"/>
            <TargetField Definition="DestNumUserDef2"/>
            <TargetField Definition="DestNumUserDef3"/>
            <TargetField Definition="DestStoreroomId"/>
            <TargetField Definition="DestStoreareaId"/>
            <TargetField Definition="DestLocationId"/>
            <TargetField Definition="DestMaterialStatusId"/>
			<TargetField Definition="SrcRefLineOID"/>
        </TargetTable>
    </TargetTableCollection>
	<FeedbackCollection>
        <FeedbackObject Height="270" ObjectKey="LRP_ReturnNotice" Width="319" X="811" Y="564">
            <FeedbackTable TableKey="LRP_ReturnNotice_L">
                <FeedbackField FieldKey="RecvQty"/>
            </FeedbackTable>
        </FeedbackObject>
    </FeedbackCollection>
</Map>