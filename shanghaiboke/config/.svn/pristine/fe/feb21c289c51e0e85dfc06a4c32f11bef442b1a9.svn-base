<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Caption="修改密码" FormType="View" Key="V_ChangePassWord" Platform="">
    <Body PopHeight="250px" PopWidth="400px">
        <Block>
            <FlexFlowLayoutPanel Caption="根面板" Key="root">
                <ToolBar Caption="ToolBar1" Height="pref" Key="ToolBar1">
                    <ToolBarItemCollection/>
                </ToolBar>
                <SplitPanel Caption="SplitPanel1" Height="100%" Key="SplitPanel1" Orientation="Vertical">
                    <GridLayoutPanel Caption="基本信息" Height="pref" Key="first_head" Padding="10px">
                        <TextEditor BuddyKey="Lab_OldPassWord" Caption="旧密码" Key="OldPassWord" X="2" XSpan="2" Y="0"/>
                        <Label Caption="旧密码" Key="Lab_OldPassWord" X="1" Y="0"/>
                        <TextEditor BuddyKey="Lab_NewPassWord" Caption="新密码" Key="NewPassWord" X="2" XSpan="2" Y="1"/>
                        <Label Caption="新密码" Key="Lab_NewPassWord" X="1" Y="1"/>
                        <TextEditor BuddyKey="Lab_ConfirmNewPassWord" Caption="确认新密码" Key="ConfirmNewPassWord" X="2" XSpan="2" Y="2"/>
                        <Label Caption="确认新密码" Key="Lab_ConfirmNewPassWord" X="1" Y="2"/>
                        <TextEditor BuddyKey="Lab_OID" Caption="OID" Enable="false" Key="OID" Visible="false" X="2" Y="3"/>
                        <Label Caption="OID" Key="Lab_OID" X="1" Y="3"/>
                        <RowDefCollection RowGap="8">
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="8">
                            <ColumnDef Width="50px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="100%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="50px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <GridLayoutPanel Caption="GridLayoutPanel1" Key="GridLayoutPanel1">
                        <Button Caption="确定" Key="OK" X="1" Y="0">
                            <OnClick>
                                <![CDATA[
									if(GetValue('NewPassWord') != GetValue('ConfirmNewPassWord')){
										Confirm('新密码和确认新密码不一致。','OK','OK:{}');
										return true;
									}
									var CodedPassWord = InvokeService("LRP_PassWordSHAEncode", false, false,GetValue('NewPassWord'),GetValue('OldPassWord'),GetValue('OID'),"LRP_Driver");							
									Parent.SetValue('Password',CodedPassWord);
									Close();
								]]>
                            </OnClick>
                        </Button>
                        <Button Caption="取消" Key="Cancle" X="2" Y="0">
                            <OnClick>
                                <![CDATA[Close();]]>
                            </OnClick>
                        </Button>
                        <RowDefCollection RowGap="5">
                            <RowDef Height="30px"/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="5">
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="50%"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <SplitSize Size="150px"/>
                    <SplitSize Size="50px"/>
                </SplitPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
    <OnPostShow>
        <![CDATA[
		SetValue("OID",GetPara('OID_para'));
		]]>
    </OnPostShow>
</Form>
