<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="DriverOrderManage" Caption="订单管理" Authenticate="false" HasNavigationBar="false">
    <DataSource>
        <DataObject Key="LRP_DriverOrderManage" Caption="运输作业单-直发序事簿" PrimaryTableKey="LRP_DriverOrder">
            <TableCollection>
                <Table Key="LRP_DriverOrder" Caption="司机订单" TableMode="Detail" SourceType="Query">
                    <Column Key="OID" Caption="作业单OID" DataType="Long"/>
                    <Column Key="TOHOID" Caption="订单OID" DataType="Long"/>
                    <Column Key="timestatus" Caption="操作状态" DataType="Varchar" Length="100"/>
                    <Column Key="orderstatus" Caption="作业单状态" DataType="Varchar" Length="100"/>
                    <Column Key="TJHStatus" Caption="作业单状态" DataType="Integer"/>
                    <Column Key="TDHStatus" Caption="调度单状态" DataType="Integer"/>
                    <Column Key="DriverTaskStatus" Caption="司机任务状态" DataType="Integer"/>
                    <Column Key="lblstatus" Caption="司机操作状态" DataType="Varchar" Length="100"/>
                    <Column Key="ExpectArriveTime" Caption="用车时间" DataType="DateTime" SortType="Desc"/>
                    <Column Key="RecvContactor" Caption="收货联系人" DataType="Varchar" Length="100"/>
                    <Column Key="RecvContactMobile" Caption="收货联系人手机" DataType="Varchar" Length="100"/>
                    <Column Key="SendAddress" Caption="发货地址" DataType="Varchar" Length="100"/>
                    <Column Key="RecvAddress" Caption="收货地址" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactor" Caption="发货联系人" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactMobile" Caption="联系人手机" DataType="Varchar" Length="100"/>
                    <Column Key="PayMethod" Caption="付款方式" DataType="Integer"/>
                    <Column Key="SendPartyName" Caption="发货方名称" DataType="Varchar" Length="100"/>
                    <Column Caption="起点经度" Key="SendLongitude" DataType="Numeric" Precision="10" Scale="6"/>
                    <Column Caption="起点纬度" Key="SendLatitude" DataType="Numeric" Precision="10" Scale="6"/>
                    <Column Caption="终点经度" Key="RecvLongitude" DataType="Numeric" Precision="10" Scale="6"/>
                    <Column Caption="终点纬度" Key="RecvLatitude" DataType="Numeric" Precision="10" Scale="6"/>
                    <Column Key="RecvPartyName" Caption="收货方名称" DataType="Varchar" Length="100"/>
                    <Column Key="SendProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="SendCityId" Caption="市" DataType="Long"/>
                    <Column Key="SendDistrictId" Caption="区" DataType="Long"/>
                    <Column Key="RecvProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="RecvCityId" Caption="市" DataType="Long"/>
                    <Column Key="RecvDistrictId" Caption="区" DataType="Long"/>
                    <Column Key="ServiceId" Caption="服务id" DataType="Long"/>
                    <Column Key="TruckTypeId" Caption="车辆类型" DataType="Long"/>
                    <Column Key="TruckLicenseNo" Caption="拍照号" DataType="Varchar" Length="100"/>
                    <Column Key="DriverId" Caption="司机id" DataType="Long"/>
                    <Column Key="JobType" Caption="作业单类型" DataType="Varchar" Length="10"/>
                    <Column Key="Weight" Caption="重量" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="Cubage" Caption="体积" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="Amount" Caption="收入" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="Freight" Caption="运费" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <ParameterCollection>
                        <Parameter Formula="GetUserOperator();" DataType="Long"/>
                    </ParameterCollection>
                    <Statement>
                        <![CDATA[ select 
    oid,
    TOHOID,
    timestatus,
    orderstatus,
    TJHStatus,
    TDHStatus,
    DriverTaskStatus,
    lblstatus,
	DispatchOrgId,
    ExpectArriveTime,
	SendContactor,
	SendContactMobile,
    SendAddress,
    SendPartyName,
	SendLongitude,
	SendLatitude,
	SendCityId,
	SendDistrictId,
    RecvAddress,
    RecvPartyName,
	RecvLongitude,
	RecvLatitude,
	RecvCityId,
	RecvDistrictId,
    Weight,
    Cubage,
    Freight,
    Amount
from
    (Select 
			oid,
            TOHOID,
            timestatus,
            orderstatus,
            TJHStatus,
            TDHStatus,
            DriverTaskStatus,
            lblstatus,
			DispatchOrgId,
            ExpectArriveTime,
			SendContactor,
			SendContactMobile,
            SendAddress,
            SendPartyName,
			SendLongitude,
			SendLatitude,
			SendCityId,
			SendDistrictId,
            RecvAddress,
			RecvPartyName,
			RecvLongitude,
			RecvLatitude,
			RecvCityId,
			RecvDistrictId,
			sum(Weight) Weight,
            sum(Cubage) Cubage,
            sum(Freight) Freight
    from
        (select 
			TJH.OID,
            TOH.OID TOHOID,
            case
                when TJH.Status = 710 then '22.png'
                when TJH.Status = 730 then '23.png'
            end as timestatus,
            case
                when TJH.Status = 710 then '已接单'
                when TJH.Status = 730 then '进行中'
                else '已完成'
            end as orderstatus,
            TJH.Status as TJHStatus,
            TDH.Status as TDHStatus,
            TDH.DriverTaskStatus,
            case
                when
                    TDH.DriverTaskStatus = 3
                        and TJH.Status = 710
                        and TDH.Status = 100
                then
                    '已出发'
                when
                    TJH.Status = 730 and TDH.Status = 750
                        and TOH.Status = 750
                then
                    '已发车'
                when
                    TJH.Status = 900 and TDH.Status = 900
                        and TOH.Status = 920
                then
                    '已送货'
                when TOH.Status = 940 then '已回单'
                else '未开始'
            end as lblstatus,
			TOH.DispatchOrgId,
            TOH.ExpectArriveTime,
            TOH.SendContactor,
            TOH.SendContactMobile,
            TOH.SendAddress,
            TOH.SendPartyName,
			TOH.SendLongitude,
			TOH.SendLatitude,
			TOH.SendCityId,
			TOH.SendDistrictId,
            TOH.RecvAddress,
            TOH.RecvPartyName,
			TOH.RecvLongitude,
			TOH.RecvLatitude,
			TOH.RecvCityId,
			TOH.RecvDistrictId,
			TJML.Weight,
            TJML.Cubage,
            TOML.Freight
    from
        LRP_TransportDispatch_H TDH
    join LRP_TransportDJ_L TDL ON TDH.oid = TDL.soid
    join LRP_TransportJob_H TJH ON TJH.oid = TDL.TJId
    join LRP_TransportOrder_H TOH ON TJH.OrderNo = TOH.No
    join LRP_TransportJobMat_L TJML ON TJH.oid = TJML.soid
    join LRP_TransportMaterial_L TOML ON TOH.oid = TOML.soid
    where
        TJH.Status >= 710
            and (TDH.DriverTaskStatus = 1
            or TDH.DriverTaskStatus = 3)
            and TOH.status < 940
			and TDH.DriverId = ?) a
    group by oid,
            TOHOID,
            timestatus,
            orderstatus,
            TJHStatus,
            TDHStatus,
            DriverTaskStatus,
            lblstatus,
			DispatchOrgId,
            ExpectArriveTime,
            SendContactor,
			SendContactMobile,
            SendAddress,
            SendPartyName,
			SendLongitude,
			SendLatitude,
			SendCityId,
			SendDistrictId,
            RecvAddress,
			RecvPartyName,
			RecvLongitude,
			RecvLatitude,
			RecvCityId,
			RecvDistrictId) b
    Left join
    (select 
        TOSL.SOID, sum(TOSL.ServiceAmount) as Amount
    from
        LRP_TransportOrderService_L TOSL
    group by TOSL.SOID) c ON b.TOHOID = c.SOID ORDER BY b.ExpectArriveTime desc]]>
                    </Statement>
                </Table>
                <Table Key="LRP_DriverOrderDtl" Caption="司机订单历史" TableMode="Detail" SourceType="Query">
                    <Column Key="OID" Caption="订单OID" DataType="Long"/>
                    <Column Key="timestatus" Caption="操作状态" DataType="Varchar" Length="100"/>
                    <Column Key="orderstatus" Caption="作业单状态" DataType="Varchar" Length="100"/>
                    <Column Key="TJHStatus" Caption="作业单状态" DataType="Integer"/>
                    <Column Key="TDHStatus" Caption="调度单状态" DataType="Integer"/>
                    <Column Key="DriverTaskStatus" Caption="司机任务状态" DataType="Integer"/>
                    <Column Key="lblstatus" Caption="司机操作状态" DataType="Varchar" Length="100"/>
                    <Column Key="ExpectArriveTime" Caption="用车时间" DataType="DateTime" SortType="Desc"/>
                    <Column Key="RecvContactor" Caption="收货联系人" DataType="Varchar" Length="100"/>
                    <Column Key="RecvContactMobile" Caption="收货联系人手机" DataType="Varchar" Length="100"/>
                    <Column Key="SendAddress" Caption="发货地址" DataType="Varchar" Length="100"/>
                    <Column Key="RecvAddress" Caption="收货地址" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactor" Caption="发货联系人" DataType="Varchar" Length="100"/>
                    <Column Key="SendContactMobile" Caption="联系人手机" DataType="Varchar" Length="100"/>
                    <Column Key="PayMethod" Caption="付款方式" DataType="Integer"/>
                    <Column Key="SendPartyName" Caption="发货方名称" DataType="Varchar" Length="100"/>
                    <Column Key="RecvPartyName" Caption="收货方名称" DataType="Varchar" Length="100"/>
                    <Column Key="ServiceId" Caption="服务id" DataType="Long"/>
                    <Column Key="TruckTypeId" Caption="车辆类型" DataType="Long"/>
                    <Column Key="TruckLicenseNo" Caption="拍照号" DataType="Varchar" Length="100"/>
                    <Column Key="DriverId" Caption="司机id" DataType="Long"/>
                    <Column Key="JobType" Caption="作业单类型" DataType="Varchar" Length="10"/>
                    <Column Key="Weight" Caption="重量" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="Cubage" Caption="体积" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="Amount" Caption="收入" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <Column Key="Freight" Caption="运费" DataType="Numeric" Precision="18" Scale="2" DefaultValue="0"/>
                    <ParameterCollection>
                        <Parameter Formula="GetUserOperator();" DataType="Long"/>
                    </ParameterCollection>
                    <Statement>
                        <![CDATA[select 
    oid,
    TOHOID,
    orderstatus,
	DispatchOrgId,
    SendContactor,
    SendContactMobile,
    SendAddress,
    SendPartyName,
    RecvAddress,
    RecvPartyName,
    Weight,
    Cubage,
    Freight,
    Amount
from
    (select 
        oid,
            TOHOID,
            orderstatus,
			DispatchOrgId,
            SendContactor,
            SendContactMobile,
            SendAddress,
            SendPartyName,
            RecvPartyName,
            RecvAddress,
            sum(Weight) Weight,
            sum(Cubage) Cubage,
            sum(Freight) Freight
    from
        (select 
        TJH.OID,
            TOH.OID TOHOID,
			TOH.DispatchOrgId,
            case
                when TOH.Status = 940 then '已回单'
            end as orderstatus,
            TOH.SendAddress,
            TOH.SendContactor,
            TOH.SendContactMobile,
            TOH.SendPartyName,
            TOH.RecvPartyName,
            TOH.RecvAddress,
            TJML.Weight as Weight,
            TJML.Cubage as Cubage,
            TOML.Freight as Freight
    from
        LRP_TransportDispatch_H TDH
    join LRP_TransportDJ_L TDL ON TDH.oid = TDL.soid
    join LRP_TransportJob_H TJH ON TJH.oid = TDL.TJId
    join LRP_TransportOrder_H TOH ON TJH.OrderNo = TOH.No
    join LRP_TransportJobMat_L TJML ON TJH.oid = TJML.soid
    join LRP_TransportMaterial_L TOML ON TOH.oid = TOML.soid
    where
        TJH.Status = 900
            and TDH.DriverTaskStatus = 3
            and TOH.status = 940
			and TDH.DriverId = ?) a
    group by oid , TOHOID , orderstatus , DispatchOrgId, SendContactor , SendContactMobile , SendAddress , SendPartyName , RecvAddress , RecvPartyName , Weight , Cubage , Freight) b
        Left join
    (select 
        TOSL.SOID, sum(TOSL.ServiceAmount) as Amount
    from
        LRP_TransportOrderService_L TOSL
    group by TOSL.SOID) c ON b.TOHOID = c.SOID]]>
                    </Statement>
                </Table>
                <Table Key="TransportOrderRoute" Caption="途径信息" TableMode="Detail" SourceType="Query">
                    <Column Key="OID" Caption="对象标识" DataType="Long"/>
                    <Column Key="City" Caption="市" DataType="Varchar" Length="200"/>
                    <Column Key="District" Caption="区" DataType="Varchar" Length="200"/>
                    <Column Key="AddressName" Caption="地址名称" DataType="Varchar" Length="40"/>
                    <Column Key="Address" Caption="详细地址" DataType="Varchar" Length="100"/>
                    <Column Key="Latitude" Caption="经度" DataType="Numeric" Precision="18" Scale="6" DefaultValue="0"/>
                    <Column Key="Longitude" Caption="纬度" DataType="Numeric" Precision="18" Scale="6" DefaultValue="0"/>
                    <ParameterCollection>
                        <Parameter Formula="GetPara('TJHOID')" DataType="Long"/>
                    </ParameterCollection>
                    <Statement>
                        <![CDATA[select 
	c.Name City,
	d.name District,
    TORL.OID,
    TORL.AddressName,
    TORL.Address,
    TORL.Latitude,
    TORL.Longitude
from
    LRP_TransportJob_H TJH
        join
    LRP_TransportOrder_H TOH ON TJH.OrderNo = TOH.No
        join
    LRP_TransportOrderRoute_L TORL ON TORL.Soid = TOH.Soid
        join
    LRP_City c ON c.OID = TORL.CityId
        join
    LRP_District d ON d.OID = TORL.DistrictId
						where AddressType = 50 and TJH.oid = ?]]>
                    </Statement>
                </Table>
                <Table Key="LRP_DriverNavi" Caption="导航" TableMode="Detail" SourceType="Query">
                    <Column Key="TOHOID" Caption="订单OID" DataType="Long"/>
                    <Column Key="SendAddress" Caption="发货地址" DataType="Varchar" Length="100"/>
                    <Column Key="RecvAddress" Caption="收货地址" DataType="Varchar" Length="100"/>
                    <Column Caption="起点经度" Key="SendLongitude" DataType="Numeric" Precision="10" Scale="6" DefaultValue="0"/>
                    <Column Caption="起点纬度" Key="SendLatitude" DataType="Numeric" Precision="10" Scale="6" DefaultValue="0"/>
                    <Column Caption="终点经度" Key="RecvLongitude" DataType="Numeric" Precision="10" Scale="6" DefaultValue="0"/>
                    <Column Caption="终点纬度" Key="RecvLatitude" DataType="Numeric" Precision="10" Scale="6" DefaultValue="0"/>
                    <Column Key="RecvPartyName" Caption="收货方名称" DataType="Varchar" Length="100"/>
                    <Column Key="SendPartyName" Caption="发货方名称" DataType="Varchar" Length="100"/>
                    <Column Key="SendProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="SendCityId" Caption="市" DataType="Long"/>
                    <Column Key="SendCity" Caption="市" DataType="Varchar" Length="200"/>
                    <Column Key="SendDistrictId" Caption="区" DataType="Long"/>
                    <Column Key="SendDistrict" Caption="区" DataType="Varchar" Length="200"/>
                    <Column Key="RecvProvinceId" Caption="省" DataType="Long"/>
                    <Column Key="RecvCityId" Caption="市" DataType="Long"/>
                    <Column Key="RecvCity" Caption="市" DataType="Varchar" Length="200"/>
                    <Column Key="RecvDistrictId" Caption="区" DataType="Long"/>
                    <Column Key="RecvDistrict" Caption="区" DataType="Varchar" Length="200"/>
                    <ParameterCollection>
                        <Parameter Formula="GetPara('TOHOID')" DataType="Long"/>
                    </ParameterCollection>
                    <Statement>
                        <![CDATA[ select 
    h.OID TOHOID,
	a.Name SendCity,
	b.Name RevcCity,
	c.name SendDistrict,
	d.name RecvDistrict,
    SendAddress,
    RecvAddress,
    SendPartyName,
	SendLongitude,
	SendLatitude,
	SendCityId,
	SendDistrictId,
    RecvPartyName,
	RecvLongitude,
	RecvLatitude,
	RecvCityId,
	RecvDistrictId
    from
    LRP_TransportOrder_H h
join LRP_City a on a.OID = h.SendCityId
join LRP_City b on b.OID = h.RecvCityId
join LRP_District c on c.OID = h.SendDistrictId
join LRP_District d on d.OID = h.RecvDistrictId 
    where h.OID = ?]]>
                    </Statement>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <ScriptCollection>
        <Script Key="FormActive" Range="Action" Verb="">
            <![CDATA[LoadData()]]>
        </Script>
    </ScriptCollection>
    <Body>
        <Block Key="block_destination" Root="false">
            <PopView Key="pop_destination" Height="350px">
                <GridLayoutPanel Key="root1">
                    <TableView Key="info_table" X="0" Y="0">
                        <TableRowCollection>
                            <TableRow Key="r1" TopMargin="5px">
                                <GridLayoutPanel Key="detail_panel1" Height="pref" LeftMargin="5px">
                                    <Label Key="truck_destination" Caption="您要去哪里？" X="0" Y="0">
                                        <Format ForeColor="#000000" HAlign="Center">
                                            <Font Size="16"/>
                                        </Format>
                                    </Label>
                                    <RowDefCollection>
                                        <RowDef Height="30px"/>
                                    </RowDefCollection>
                                    <ColumnDefCollection>
                                        <ColumnDef Width="100%"/>
                                    </ColumnDefCollection>
                                </GridLayoutPanel>
                            </TableRow>
                            <TableRow Key="r2" TopMargin="5px">
                                <GridLayoutPanel Key="detail_panel2" Height="pref" LeftMargin="10px">
                                    <CheckBox Key="CheckBox1" X="4" Y="0" YSpan="2" Enable="false"/>
                                    <Label Key="SendPartyName1" X="3" Y="0" Enable="false">
                                        <DataBinding ColumnKey="SendPartyName" TableKey="LRP_DriverNavi"/>
                                        <Format BackColor="Transparent">
                                            <Font Size="14"/>
                                        </Format>
                                    </Label>
                                    <Label Key="SendAddress1" X="3" Y="1" Enable="false">
                                        <DataBinding ColumnKey="SendAddress" TableKey="LRP_DriverNavi"/>
                                        <Format BackColor="Transparent">
                                            <Font Size="10"/>
                                        </Format>
                                    </Label>
                                    <Label Key="Lab_SendParty1" Caption="发货地" X="1" Y="0" YSpan="2">
                                        <Format BackColor="Transparent"/>
                                    </Label>
                                    <RowDefCollection>
                                        <RowDef Height="30px"/>
                                        <RowDef Height="20px"/>
                                    </RowDefCollection>
                                    <ColumnDefCollection>
                                        <ColumnDef Width="10px"/>
                                        <ColumnDef Width="70px"/>
                                        <ColumnDef Width="5px"/>
                                        <ColumnDef Width="100%"/>
                                        <ColumnDef Width="30px"/>
                                        <ColumnDef Width="10px"/>
                                    </ColumnDefCollection>
                                </GridLayoutPanel>
                                <RowClick>
                                    <![CDATA[
										if(GetValue('CheckBox1')==0){
											SetValue('CheckBox1',1);
											SetValue('CheckBox3',0);
											var count = GetRowCount("r3"); 
											var i = 0;
											while (i < count){
												if(GetCellValue('r3',i,'CheckBox2')==1){
													SetCellValue('r3',i,'CheckBox2',0);
													break;
												}
												i=i+1;
											}
										}else{
											SetValue('CheckBox1',0);
										}
										var SendLatitude = LRP_DriverNavi.SendLatitude;
										var SendLongitude = LRP_DriverNavi.SendLongitude;
										var SendCity = LRP_DriverNavi.SendCity;
										var SendDistrict = LRP_DriverNavi.SendDistrict;
										var SendAddress = LRP_DriverNavi.SendAddress;
										var SendDestination = SendCity+SendDistrict+SendAddress + "";
										if(IsNull(SendLatitude) || ToInt(SendLatitude) <= 0 || IsNull(SendLongitude) || ToInt(SendLongitude) <= 0){
											SetValue('Destination',SendDestination);
										}else{
											SetValue('DestLatitude',SendLatitude);
											SetValue('DestLongitude',SendLongitude);
											SetValue('Destination','');
										}
										]]>
                                </RowClick>
                            </TableRow>
                            <TableRow Key="r3" TopMargin="5px" RowType="Detail" TableKey="TransportOrderRoute">
                                <GridLayoutPanel Key="GridLayoutPanel3" Caption="GridLayoutPanel3" LeftMargin="10px">
                                    <Label Key="AddressName1" X="3" Y="0" Enable="false">
                                        <DataBinding ColumnKey="AddressName"/>
                                        <Format>
                                            <Font Size="14"/>
                                        </Format>
                                    </Label>
                                    <Label Key="Address1" X="3" Y="1" Enable="false">
                                        <DataBinding ColumnKey="Address"/>
                                        <Format>
                                            <Font Size="10"/>
                                        </Format>
                                    </Label>
                                    <Label Key="Lab_RouteAddressName1" Caption="途径地" X="1" Y="0" YSpan="2"/>
                                    <Label Key="Latitude1" X="3" Y="1" Visible="false">
                                        <DataBinding ColumnKey="Latitude"/>
                                    </Label>
                                    <Label Key="Longitude1" X="3" Y="1" Visible="false">
                                        <DataBinding ColumnKey="Longitude"/>
                                    </Label>
                                    <Label Key="City1" X="3" Y="1" Visible="false">
                                        <DataBinding ColumnKey="City"/>
                                    </Label>
                                    <Label Key="District1" X="3" Y="1" Visible="false">
                                        <DataBinding ColumnKey="District"/>
                                    </Label>
                                    <CheckBox Key="CheckBox2" X="4" Y="0" YSpan="2" Enable="false"/>
                                    <RowDefCollection>
                                        <RowDef Height="30px"/>
                                        <RowDef Height="20px"/>
                                    </RowDefCollection>
                                    <ColumnDefCollection>
                                        <ColumnDef Width="10px"/>
                                        <ColumnDef Width="70px"/>
                                        <ColumnDef Width="5px"/>
                                        <ColumnDef Width="100%"/>
                                        <ColumnDef Width="30px"/>
                                        <ColumnDef Width="10px"/>
                                    </ColumnDefCollection>
                                </GridLayoutPanel>
                                <RowClick>
                                    <![CDATA[
										if(GetCellValue('r3',GetFocusRow('r3'),'CheckBox2')==0){
											loop "r3" (true){
												var row = GetRowIndex('r3');
												if(CheckBox2==1){
													SetCellValue('r3',row,'CheckBox2',0);
													break;
												}
											}
											SetCellValue('r3',GetFocusRow('r3'),'CheckBox2',1);
											SetValue('CheckBox1',0);
											SetValue('CheckBox3',0);
										}else{
											SetCellValue('r3',GetFocusRow('r3'),'CheckBox2',0);
										}
										var Latitude = GetCellValue('r3',GetFocusRow('r3'),'Latitude1');
										var Longitude = GetCellValue('r3',GetFocusRow('r3'),'Longitude1');
										var City = GetCellValue('r3',GetFocusRow('r3'),'City1');
										var District = GetCellValue('r3',GetFocusRow('r3'),'District1');
										var Address = GetCellValue('r3',GetFocusRow('r3'),'Address1');
										var Destination = City+District+Address + "";
										if(IsNull(Latitude) || ToInt(Latitude) <= 0 || IsNull(Longitude) || ToInt(Longitude) <= 0){
											SetValue('Destination',Destination);
										}else{
											SetValue('DestLatitude',Latitude);
											SetValue('DestLongitude',Longitude);
											SetValue('Destination','');
										}
										]]>
                                </RowClick>
                            </TableRow>
                            <TableRow Key="r4" TopMargin="5px">
                                <GridLayoutPanel Key="detail_panel4" Height="pref" LeftMargin="10px">
                                    <Label Key="RecvPartyName1" X="3" Y="0" Enable="false">
                                        <DataBinding ColumnKey="RecvPartyName" TableKey="LRP_DriverNavi"/>
                                        <Format>
                                            <Font Size="14"/>
                                        </Format>
                                    </Label>
                                    <Label Key="RecvAddress1" X="3" Y="1" Enable="false">
                                        <DataBinding ColumnKey="RecvAddress" TableKey="LRP_DriverNavi"/>
                                        <Format>
                                            <Font Size="10"/>
                                        </Format>
                                    </Label>
                                    <Label Key="Lab_RecvParty1" Caption="收货地" X="1" Y="0" YSpan="2"/>
                                    <CheckBox Key="CheckBox3" X="4" Y="0" YSpan="2" Enable="false"/>
                                    <RowDefCollection>
                                        <RowDef Height="30px"/>
                                        <RowDef Height="20px"/>
                                    </RowDefCollection>
                                    <ColumnDefCollection>
                                        <ColumnDef Width="10px"/>
                                        <ColumnDef Width="70px"/>
                                        <ColumnDef Width="5px"/>
                                        <ColumnDef Width="100%"/>
                                        <ColumnDef Width="30px"/>
                                        <ColumnDef Width="10px"/>
                                    </ColumnDefCollection>
                                </GridLayoutPanel>
                                <RowClick>
                                    <![CDATA[
										if(GetValue('CheckBox3')==0){
											SetValue('CheckBox3',1);
											SetValue('CheckBox1',0);
											var count1 = GetRowCount("r3"); 
											var i1 = 0;
											while (i1 < count1){
												if(GetCellValue('r3',i1,'CheckBox2')==1){
													SetCellValue('r3',i1,'CheckBox2',0);
													break;
												}
												i1=i1+1;
											}
										}else{
											SetValue('CheckBox3',0);
										}
										var RecvLatitude = LRP_DriverNavi.RecvLatitude;
										var RecvLongitude = LRP_DriverNavi.RecvLongitude;
										var RecvCity = LRP_DriverNavi.RecvCity;
										var RecvDistrict = LRP_DriverNavi.RecvDistrict;
										var RecvAddress = LRP_DriverNavi.RecvAddress;
										var RecvDestination = RecvCity+RecvDistrict+RecvAddress + "";
										if(IsNull(RecvLatitude) || ToInt(RecvLatitude) <= 0 || IsNull(RecvLongitude) || ToInt(RecvLongitude) <= 0){
											SetValue('Destination',RecvDestination);
										}else{
											SetValue('DestLatitude',RecvLatitude);
											SetValue('DestLongitude',RecvLongitude);
											SetValue('Destination','');
										}
										]]>
                                </RowClick>
                            </TableRow>
                        </TableRowCollection>
                    </TableView>
                    <GridLayoutPanel Key="detail_panel5" X="0" Y="1" Height="60px" LeftMargin="10px">
                        <Label Key="Destination" X="1" Y="0" Visible="false" HasBorder="true" BorderRadius="4" BorderColor="#b3b3b3"/>
                        <NumberEditor Key="DestLatitude" X="3" Y="0" Visible="false" HasBorder="true" BorderRadius="4" BorderColor="#b3b3b3"/>
                        <NumberEditor Key="DestLongitude" X="4" Y="0" Visible="false" HasBorder="true" BorderRadius="4" BorderColor="#b3b3b3"/>
                        <Button Key="truck_pop_esc" Caption="取消" Enable="True" X="1" Y="1" BorderStyle="none">
                            <Format ForeColor="#000000" BackColor="#ffffff"/>
                            <OnClick>
                                <![CDATA[
											ClosePop('pop_destination');
							]]>
                            </OnClick>
                        </Button>
                        <Button Key="truck_pop_ok" Caption="确定" Enable="True" X="3" Y="1" BorderStyle="none">
                            <Format ForeColor="#ff0000" BackColor="#ffffff"/>
                            <OnClick>
                                <![CDATA[
										
										var start = NewJSONObject();
										var table = GetBDLocation();
										start.latitude = table.get('latitude');
										start.longitude = table.get('longitude');
										if(IsNull(Destination) && (IsNull(DestLatitude) || DestLatitude <=0 || IsNull(DestLongitude) || DestLongitude <=0)){
											ShowToast("您还没有选择目的地！");
											return 0;
										}
										
										if(IsNull(DestLatitude) || DestLatitude <=0 || IsNull(DestLongitude) || DestLongitude <=0){
											var end = InvokeService("LRP_getLatAndLngByAddress", True, false, Destination);
											MapClientNavigation(start,end,null);
											return 0;
										}
										
										var end = NewJSONObject();
										end.latitude=GetValue('DestLatitude');
										end.longitude=GetValue('DestLongitude');
										MapClientNavigation(start,end,null);
										ClosePop('pop_destination');
										
							]]>
                            </OnClick>
                        </Button>
                        <RowDefCollection>
                            <RowDef Height="10px"/>
                            <RowDef Height="40px"/>
                            <RowDef Height="5px"/>
                        </RowDefCollection>
                        <ColumnDefCollection>
                            <ColumnDef Width="10px"/>
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="10px"/>
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="50px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <RowDefCollection>
                        <RowDef Height="200px"/>
                        <RowDef Height="60px"/>
                        <RowDef Height="2px"/>
                    </RowDefCollection>
                    <ColumnDefCollection>
                        <ColumnDef Width="100%"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
            </PopView>
        </Block>
        <Block>
            <GridLayoutPanel Key="root">
                <Format BackColor="#e6e6e6"/>
                <LinearLayoutPanel Caption="Title" Key="Title" Orientation="Horizontal" X="0" Y="0">
                    <Format BackColor="#f14c52"/>
                    <Label Key="OrderTitle" Caption="订单管理" Height="auto" Weight="1.0">
                        <Format ForeColor="#ffffff" HAlign="Center">
                            <Font Size="20"/>
                        </Format>
                    </Label>
                </LinearLayoutPanel>
                <Label Key="ShowValue" X="0" Y="1" Visible="false"/>
                <TabGroup Caption="订单管理" Key="TabPanel1" IndicatorColor="#ffffff" X="0" Y="1">
                    <TabItem Text="进行中">
                        <Action>
                            <![CDATA[SetValue('ShowValue', 0);]]>
                        </Action>
                    </TabItem>
                    <TabItem Text="已结束">
                        <Action>
                            <![CDATA[SetValue('ShowValue', 1);]]>
                        </Action>
                    </TabItem>
                </TabGroup>
                <GridLayoutPanel Key="GridLayoutPanel1" Caption="进行中" X="0" Y="2" Visible="ShowValue==0 || Length(ShowValue) == 0">
                    <RefreshControl ColorSchemes="#17bb92" Key="RefreshControl1" Caption="刷新控件" ProgressBackgroundColorScheme="#cccccc" X="0" Y="0">
                        <RefreshHeader Icon="" PromptText="正在加载" FinishText="加载完成">
                            <![CDATA[LoadData();ShowToast("没有更多的消息了")]]>
                            <Format/>
                        </RefreshHeader>
                        <RefreshFooter Icon="" PromptText="正在加载" FinishText="加载完成">
                            <![CDATA[LoadData();ShowToast("没有更多的消息了")]]>
                            <Format/>
                        </RefreshFooter>
                        <ListView Caption="进行中" Key="list" TableKey="LRP_DriverOrder" RowHeight="255" Enable="true" SeparatorStyle="solid none solid none" HasBorder="true" BorderColor="#e6e6e6" Padding="5px">
                            <Format Font="20px"/>
                            <ListViewColumnCollection>
                                <ListViewColumn Key="SelectField" IsSelect="true" DefaultValue="0" ColumnType="CheckBox" Visible="false" Icon="flight_check_unselect.png" SelectedIcon="flight_check_select.png" Stretch="true" ImageScaleType="Fit_XY"/>
                                <ListViewColumn Key="GreySeparate">
                                    <Format HAlign="Center" BackColor="#b3b3b3"/>
                                </ListViewColumn>
                                <ListViewColumn Key="PinkSeparate">
                                    <Format HAlign="Center" BackColor="#e64d4d"/>
                                </ListViewColumn>
                                <ListViewColumn Key="blank1"/>
                                <ListViewColumn Key="blank2"/>
                                <ListViewColumn Key="blank3"/>
                                <ListViewColumn Key="blank4"/>
                                <ListViewColumn Key="blank5">
                                    <Format HAlign="Center" BackColor="#e6e6e6"/>
                                </ListViewColumn>
                                <ListViewColumn Key="SendLongitude" DataColumnKey="SendLongitude"/>
                                <ListViewColumn Key="SendLatitude" DataColumnKey="SendLatitude"/>
                                <ListViewColumn Key="RecvLongitude" DataColumnKey="RecvLongitude"/>
                                <ListViewColumn Key="RecvLatitude" DataColumnKey="RecvLatitude"/>
                                <ListViewColumn Key="TJHOID" DataColumnKey="OID" Caption="OID"/>
                                <ListViewColumn Key="TOHOID" DataColumnKey="TOHOID" Caption="OID"/>
                                <ListViewColumn Key="SignPhoto" Caption="签收拍照" ColumnType="Button" Visible="ToBool(GetGroupValue('lbl_Status') == '已送货')" Enable="True" BorderStyle="solid" BorderColor="#808080" BorderRadius="4" HasBorder="true" Margin="2px">
                                    <OnClick>
                                        <![CDATA[
                                    if(lbl_Status=='已送货'){
                                    Open('TransportJobAttach', TJHOID)}else{ShowToast("未送达，无需拍照")}
                                    ]]>
                                    </OnClick>
                                </ListViewColumn>
                                <ListViewColumn Key="timestatus" DataColumnKey="timestatus" ColumnType="Image" Visible="ToBool(!IsNull(GetGroupValue('timestatus')))" Stretch="true" ImageScaleType="Fit_XY"/>
                                <ListViewColumn Key="ExpectArriveTime" DataColumnKey="ExpectArriveTime" ColumnType="DatePicker" Format="MM月dd日 HH:mm" Enable="false">
                                    <Format HAlign="Left"/>
                                </ListViewColumn>
                                <ListViewColumn Key="orderstatus" DataColumnKey="orderstatus" Enable="false">
                                    <Format ForeColor="#ff0000" HAlign="Center"/>
                                </ListViewColumn>
                                <ListViewColumn Key="SendContactor" DataColumnKey="SendContactor"/>
                                <ListViewColumn Key="SendContactMobile" DataColumnKey="SendContactMobile"/>
                                <ListViewColumn Key="SendContactorIcon" ColumnType="Image" Image="14.png" SourceType="Resource" Stretch="true" ImageScaleType="Fit_Center" Padding="5px"/>
                                <ListViewColumn Key="SendContactMobileIcon" ColumnType="Image" Image="37.png" SourceType="Resource" Stretch="true" ImageScaleType="Fit_Center">
                                    <OnClick>
                                        <![CDATA[CallPhone(SendContactMobile);]]>
                                    </OnClick>
                                </ListViewColumn>
                                <ListViewColumn Key="SendPartyName" DataColumnKey="SendPartyName"/>
                                <ListViewColumn Key="RecvPartyName" DataColumnKey="RecvPartyName"/>
                                <ListViewColumn Key="RecvAddress" DataColumnKey="RecvAddress"/>
                                <ListViewColumn Key="SendCityId" DataColumnKey="SendCityId"/>
                                <ListViewColumn Key="SendDistrictId" DataColumnKey="SendDistrictId"/>
                                <ListViewColumn Key="RecvCityId" DataColumnKey="RecvCityId"/>
                                <ListViewColumn Key="RecvDistrictId" DataColumnKey="RecvDistrictId"/>
                                <ListViewColumn Key="RecvAddressIcon" ColumnType="Image" Stretch="true" Image="27.png" SourceType="Resource" ImageScaleType="Fit_XY" Padding="5px"/>
                                <ListViewColumn Key="SendAddress" DataColumnKey="SendAddress"/>
                                <ListViewColumn Key="SendAddressIcon" ColumnType="Image" Stretch="true" Image="26.png" SourceType="Resource" ImageScaleType="Fit_XY" Padding="5px"/>
                                <ListViewColumn Key="Amount" DataColumnKey="Amount" ColumnType="NumberEditor" Precision="18" Scale="0"/>
                                <ListViewColumn Key="AmountIcon" ColumnType="Image" Image="28.png" SourceType="Resource" Stretch="true" ImageScaleType="Fit_XY" Padding="5px"/>
                                <ListViewColumn Key="btn_Navi" ColumnType="Button" Caption="开启导航" Enable="True" BorderStyle="solid" BorderColor="#808080" BorderRadius="4" HasBorder="true" Margin="2px">
                                    <OnClick>
                                        <![CDATA[
										root.SetPara('TJHOID',TJHOID);
										root.SetPara('TOHOID',TOHOID);
										LoadData();
										PopView('pop_destination');
										
										
                                    ]]>
                                    </OnClick>
                                    <Format BackColor="#ffffff"/>
                                </ListViewColumn>
                                <ListViewColumn Key="lbl_Status" DataColumnKey="lblstatus" ColumnType="TextEditor" BorderStyle="solid" BorderColor="#cc3333" BorderRadius="4" HasBorder="true">
                                    <Format ForeColor="#cc3333" HAlign="Center"/>
                                </ListViewColumn>
                            </ListViewColumnCollection>
                            <RowClick>
                                <![CDATA[
                                      PushPara('TJHOID',TJHOID);
                                      PushPara('TJHStatus',LRP_DriverOrder.TJHStatus);
                                      PushPara('TDHStatus',LRP_DriverOrder.TDHStatus);
                                      PushPara('DriverTaskStatus',LRP_DriverOrder.DriverTaskStatus);
            						  Show('DriverCurrentOrder');	 
                            ]]>
                            </RowClick>
                        </ListView>
                    </RefreshControl>
                    <HyperLink Key="Label1" X="0" Y="0" Visible="GetRowCount('list')==0" Caption="当前没有接单单据，赶快去抢单吧！">
                        <Format ForeColor="#000000" HAlign="Center">
                            <Font Size="26"/>
                        </Format>
                        <OnClick>
                            <![CDATA[Show('DriverRoot');]]>
                        </OnClick>
                    </HyperLink>
                    <RowDefCollection RowGap="5">
                        <RowDef Height="100%"/>
                    </RowDefCollection>
                    <ColumnDefCollection ColumnGap="5">
                        <ColumnDef Width="100%"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
                <GridLayoutPanel Key="GridLayoutPanel2" Caption="已结束" X="0" Y="2" Visible="ShowValue==1">
                    <RefreshControl ColorSchemes="#17bb92" Key="RefreshControl2" Caption="刷新控件" ProgressBackgroundColorScheme="#cccccc" X="0" Y="0">
                        <RefreshHeader Icon="" PromptText="正在加载" FinishText="加载完成">
                            <![CDATA[LoadData();ShowToast("没有更多的消息了")]]>
                            <Format/>
                        </RefreshHeader>
                        <RefreshFooter Icon="" PromptText="正在加载" FinishText="加载完成">
                            <![CDATA[LoadData();ShowToast("没有更多的消息了")]]>
                            <Format/>
                        </RefreshFooter>
                        <ListView Caption="已结束" Key="list2" TableKey="LRP_DriverOrderDtl" RowHeight="160" Enable="true" PageLoadType="DB" PageRowCount="10" HasBorder="true" BorderColor="#e6e6e6" Padding="5px">
                            <ListViewColumnCollection>
                                <ListViewColumn Key="orderstatus2" DataColumnKey="orderstatus" Enable="false">
                                    <Format ForeColor="#ff0000" HAlign="Center"/>
                                </ListViewColumn>
                                <ListViewColumn Key="TJHHistoryOID" DataColumnKey="OID" Caption="OID"/>
                                <ListViewColumn Key="SendContactor2" DataColumnKey="SendContactor"/>
                                <ListViewColumn Key="SendContactMobile2" DataColumnKey="SendContactMobile"/>
                                <ListViewColumn Key="SendContactorIcon2" ColumnType="Image" Image="14.png" SourceType="Resource" Stretch="true" ImageScaleType="Fit_XY" Padding="5px"/>
                                <ListViewColumn Key="SendContactMobileIcon2" ColumnType="Image" Image="37.png" SourceType="Resource" Stretch="true" ImageScaleType="Fit_XY">
                                    <OnClick>
                                        <![CDATA[CallPhone(SendContactMobile2);]]>
                                    </OnClick>
                                </ListViewColumn>
                                <ListViewColumn Key="RecvAddress2" DataColumnKey="RecvAddress"/>
                                <ListViewColumn Key="RecvAddressIcon2" ColumnType="Image" Stretch="true" Image="27.png" SourceType="Resource" ImageScaleType="Fit_XY" Padding="5px"/>
                                <ListViewColumn Key="SendAddress2" DataColumnKey="SendAddress"/>
                                <ListViewColumn Key="SendAddressIcon2" ColumnType="Image" Image="26.png" SourceType="Resource" ImageScaleType="Fit_XY" Stretch="true" Padding="5px"/>
                                <ListViewColumn Key="Amount2" DataColumnKey="Amount" ColumnType="NumberEditor" Precision="18" Scale="0"/>
                                <ListViewColumn Key="AmountIcon2" ColumnType="Image" Image="28.png" SourceType="Resource" Stretch="true" ImageScaleType="Fit_XY" Padding="5px"/>
                                <ListViewColumn Key="blank6"/>
                                <ListViewColumn Key="blank7">
                                    <Format HAlign="Center" BackColor="#e6e6e6"/>
                                </ListViewColumn>
                            </ListViewColumnCollection>
                            <RowClick>
                                <![CDATA[
                                      PushPara('TJHOID',TJHHistoryOID);
            						  Show('DriverHistoryOrder');	
                            ]]>
                            </RowClick>
                        </ListView>
                    </RefreshControl>
                    <HyperLink Key="Label2" Visible="GetRowCount('list2')==0" Caption="当前没有已完成的单据，赶快去抢单吧！" X="0" Y="0">
                        <Format ForeColor="#000000" HAlign="Center">
                            <Font Size="26"/>
                        </Format>
                        <OnClick>
                            <![CDATA[Show('DriverRoot');]]>
                        </OnClick>
                    </HyperLink>
                    <RowDefCollection RowGap="5">
                        <RowDef Height="100%"/>
                    </RowDefCollection>
                    <ColumnDefCollection ColumnGap="5">
                        <ColumnDef Width="100%"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
                <RowDefCollection>
                    <RowDef Height="50px"/>
                    <RowDef Height="50px"/>
                    <RowDef Height="100%"/>
                </RowDefCollection>
                <ColumnDefCollection>
                    <ColumnDef Width="100%"/>
                </ColumnDefCollection>
            </GridLayoutPanel>
        </Block>
        <ViewCollection>
            <View Key="All">
                <ComponentView Key="list">
                    <GridLayout Key="list">
                        <LayoutSpan Key="SelectField" X="0" Y="3"/>
                        <LayoutSpan Key="timestatus" X="0" Y="1" XSpan="2"/>
                        <LayoutSpan Key="ExpectArriveTime" X="3" Y="1" XSpan="2"/>
                        <LayoutSpan Key="orderstatus" X="5" Y="1" XSpan="4"/>
                        <LayoutSpan Key="SendContactorIcon" X="1" Y="5"/>
                        <LayoutSpan Key="PinkSeparate" X="0" Y="3" XSpan="10"/>
                        <LayoutSpan Key="SendContactor" X="3" Y="5"/>
                        <LayoutSpan Key="SendContactMobile" X="4" Y="5"/>
                        <LayoutSpan Key="SendContactMobileIcon" X="6" Y="5"/>
                        <LayoutSpan Key="SendAddressIcon" X="1" Y="6"/>
                        <LayoutSpan Key="SendAddress" X="3" Y="6" XSpan="4"/>
                        <LayoutSpan Key="RecvAddressIcon" X="1" Y="7"/>
                        <LayoutSpan Key="RecvAddress" X="3" Y="7" XSpan="4"/>
                        <LayoutSpan Key="AmountIcon" X="1" Y="8"/>
                        <LayoutSpan Key="Amount" X="3" Y="8" XSpan="2"/>
                        <LayoutSpan Key="GreySeparate" X="0" Y="10" XSpan="10"/>
                        <LayoutSpan Key="btn_Navi" X="5" Y="12" XSpan="2"/>
                        <LayoutSpan Key="lbl_Status" X="8" Y="12"/>
                        <LayoutSpan Key="SignPhoto" X="1" Y="12" XSpan="3"/>
                        <LayoutSpan Key="blank1" X="0" Y="2" XSpan="10"/>
                        <LayoutSpan Key="blank2" X="0" Y="4" XSpan="10"/>
                        <LayoutSpan Key="blank3" X="0" Y="9" XSpan="10"/>
                        <LayoutSpan Key="blank4" X="0" Y="11" XSpan="10"/>
                        <LayoutSpan Key="blank5" X="0" Y="14" XSpan="10"/>
                        <!-- <LayoutSpan Key="ModifyOrder" X="1" Y="8" XSpan="3"/> -->
                        <RowDefCollection>
                            <RowDef Height="10px"/>
                            <RowDef Height="50px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="5px"/>
                        </RowDefCollection>
                        <ColumnDefCollection>
                            <ColumnDef Width="5px"/>
                            <ColumnDef Width="35px"/>
                            <ColumnDef Width="5px"/>
                            <ColumnDef Width="60px"/>
                            <ColumnDef Width="100%"/>
                            <ColumnDef Width="5px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="5px"/>
                            <ColumnDef Width="60px"/>
                            <ColumnDef Width="5px"/>
                        </ColumnDefCollection>
                    </GridLayout>
                </ComponentView>
                <ComponentView Key="list2">
                    <GridLayout Key="list2">
                        <LayoutSpan Key="orderstatus2" X="5" Y="4" XSpan="2"/>
                        <LayoutSpan Key="SendContactorIcon2" X="1" Y="1"/>
                        <LayoutSpan Key="SendContactor2" X="3" Y="1"/>
                        <LayoutSpan Key="SendContactMobile2" X="4" Y="1"/>
                        <LayoutSpan Key="SendContactMobileIcon2" X="5" Y="1"/>
                        <LayoutSpan Key="SendAddressIcon2" X="1" Y="2"/>
                        <LayoutSpan Key="SendAddress2" X="3" Y="2" XSpan="3"/>
                        <LayoutSpan Key="RecvAddressIcon2" X="1" Y="3"/>
                        <LayoutSpan Key="RecvAddress2" X="3" Y="3" XSpan="3"/>
                        <LayoutSpan Key="AmountIcon2" X="1" Y="4"/>
                        <LayoutSpan Key="Amount2" X="3" Y="4" XSpan="2"/>
                        <LayoutSpan Key="blank6" X="0" Y="5" XSpan="7"/>
                        <LayoutSpan Key="blank7" X="0" Y="6" XSpan="7"/>
                        <RowDefCollection>
                            <RowDef Height="10px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="35px"/>
                            <RowDef Height="2px"/>
                            <RowDef Height="5px"/>
                        </RowDefCollection>
                        <ColumnDefCollection>
                            <ColumnDef Width="15px"/>
                            <ColumnDef Width="35px"/>
                            <ColumnDef Width="5px"/>
                            <ColumnDef Width="60px"/>
                            <ColumnDef Width="100%"/>
                            <ColumnDef Width="35px"/>
                            <ColumnDef Width="60px"/>
                        </ColumnDefCollection>
                    </GridLayout>
                </ComponentView>
            </View>
        </ViewCollection>
    </Body>
    <OnLoad>
        <![CDATA[LoadData();
        ]]>
    </OnLoad>
    <MacroCollection>
        <Macro Key="macroKey1">
            <![CDATA[sele]]>
        </Macro>
    </MacroCollection>
    <FormParaCollection>
        <FormPara DataType="Long" Key="TJHOID" Type="Formula" Formula="root.GetPara('TJHOID')"/>
        <FormPara DataType="Long" Key="TOHOID" Type="Formula" Formula="root.GetPara('TOHOID')"/>
    </FormParaCollection>
    <EventHandlerCollection>
        <EventHandler Key="OrderChanged" Trigger="Show" MergeEvent="true">
            <![CDATA[LoadData()]]>
        </EventHandler>
        <EventHandler Key="SessionChanged" Trigger="Show" MergeEvent="true">
            <![CDATA[LoadData()]]>
        </EventHandler>
        <EventHandler Key="UserInfoChanged" Trigger="Show" MergeEvent="true">
            <![CDATA[LoadData()]]>
        </EventHandler>
    </EventHandlerCollection>
</Form>
