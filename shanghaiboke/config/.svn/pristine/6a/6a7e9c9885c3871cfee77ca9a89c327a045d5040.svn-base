<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="V_UserPointsQuery" Caption="用户积分查询" FormType="Report">
    <DataSource>
        <DataObject Key="V_UserPointsQuery" Caption="用户积分查询" PrimaryTableKey="V_UserPointsQuery">
            <TableCollection>
                <Table Key="V_UserPointsQuery" Caption="用户积分查询" TableMode="Detail" SourceType="Query" Persist="false">
                    <Column Key="ouname" Caption="货主用户" DataType="Varchar" Length="40"/>
                    <Column Key="TotalPoints" Caption="总积分" DataType="Numeric" Precision="18" Scale="0"/>
                    <Column Key="AvailablePoints" Caption="可用积分" DataType="Numeric" Precision="18" Scale="0"/>
                    <Statement>
                        <![CDATA[
                            select * from (select ou.name as ouname,h.TotalPoints,h.AvailablePoints from LRP_UserPoints h join USER_Operator ou on h.UserId=ou.OID ) t
                        ]]>
                    </Statement>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <Body>
        <Block>
            <FlexFlowLayoutPanel Key="main" Caption="根面板">
                <ToolBar Key="main_toolbar" Height="pref" Caption="main_toolbar">
                    <ToolBarItemCollection/>
                </ToolBar>
                <SplitPanel Key="SplitPanel1" Orientation="Vertical" Height="100%" Caption="SplitPanel1">
                    <GridLayoutPanel Key="first_head" Padding="5px" Height="pref" Caption="基本信息">
                        <TextEditor Key="username" Caption="用户名" BuddyKey="Lab_username" X="1" Y="0">
                            <Condition ColumnKey="ouname" TableKey="V_UserPointsQuery" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_username" Caption="用户名" X="0" Y="0"/>
                        <Button Key="btn_ok" Caption="查询" X="6" Y="0">
                            <OnClick>
                                <![CDATA[DealCondition();LoadData();ShowData();]]>
                            </OnClick>
                        </Button>
                        <Button Key="btn_reset" Caption="重置" X="6" Y="1">
                            <OnClick>
                                <![CDATA[ResetCondition();]]>
                            </OnClick>
                        </Button>
                        <RowDefCollection RowHeight="30" RowGap="6">
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="20">
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="10px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="10px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="10px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <Grid Key="Grid1" Caption="Grid1" Enable="false" NewEmptyRow="false" Height="100%" PageLoadType="DB" CanDelete="false" CanInsert="false" CanShift="false" Width="pref">
                        <GridColumnCollection>
                            <GridColumn Key="ouname_L" Caption="用户名" Width="80px" Sortable="true"/>
                            <GridColumn Key="Points_L" Caption="总积分" Width="80px" Sortable="true"/>
                            <GridColumn Key="AvailablePoints_L" Caption="可用积分" Width="80px" Sortable="true"/>
                        </GridColumnCollection>
                        <GridRowCollection>
                            <GridRow Key="row1" RowHeight="35" TableKey="V_UserPointsQuery">
                                <GridCell Key="ouname_L" Caption="用户名" CellType="TextEditor">
                                    <DataBinding ColumnKey="ouname"/>
                                </GridCell>
                                <GridCell Key="Points_L" Caption="总积分" CellType="NumberEditor">
                                    <DataBinding ColumnKey="TotalPoints"/>
                                </GridCell>
                                <GridCell Key="AvailablePoints_L" Caption="可用积分" CellType="NumberEditor">
                                    <DataBinding ColumnKey="AvailablePoints"/>
                                </GridCell>
                            </GridRow>
                        </GridRowCollection>
                    </Grid>
                    <SplitSize Size="85px"/>
                    <SplitSize Size="100px"/>
                </SplitPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
</Form>
