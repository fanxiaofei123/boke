<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="V_WHChangePassWord" Caption="仓管修改密码" FormType="View">
    <Body PopHeight="250px" PopWidth="400px">
        <Block>
            <FlexFlowLayoutPanel Key="root" Caption="根面板">
                <ToolBar Key="ToolBar1" Height="pref" Caption="ToolBar1">
                    <ToolBarItemCollection/>
                </ToolBar>
                <SplitPanel Key="SplitPanel1" Orientation="Vertical" Height="100%" Caption="SplitPanel1">
                    <GridLayoutPanel Key="first_head" Height="pref" Padding="10px" Caption="基本信息">
                        <TextEditor Key="OldPassWord" Caption="旧密码" BuddyKey="Lab_OldPassWord" X="2" Y="0" XSpan="2"/>
                        <Label Key="Lab_OldPassWord" Caption="旧密码" X="1" Y="0"/>
                        <TextEditor Key="NewPassWord" Caption="新密码" BuddyKey="Lab_NewPassWord" X="2" Y="1" XSpan="2"/>
                        <Label Key="Lab_NewPassWord" Caption="新密码" X="1" Y="1"/>
                        <TextEditor Key="ConfirmNewPassWord" Caption="确认新密码" BuddyKey="Lab_ConfirmNewPassWord" X="2" Y="2" XSpan="2"/>
                        <Label Key="Lab_ConfirmNewPassWord" Caption="确认新密码" X="1" Y="2"/>
                        <TextEditor Key="OID" Caption="OID" BuddyKey="Lab_OID" X="2" Y="3" Visible="false" Enable="false"/>
                        <Label Key="Lab_OID" Caption="OID" X="1" Y="3"/>
                        <RowDefCollection RowGap="8">
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="8">
                            <ColumnDef Width="50px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="100%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="50px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <GridLayoutPanel Key="GridLayoutPanel1" Caption="GridLayoutPanel1">
                        <Button Key="OK" Caption="确定" X="1" Y="0">
                            <OnClick>
                                <![CDATA[
									if(GetValue('NewPassWord') != GetValue('ConfirmNewPassWord')){
										Confirm('新密码和确认新密码不一致。','OK','OK:{}');
										return true;
									}
									var CodedPassWord = InvokeService("LRP_PassWordSHAEncode", false, false,GetValue('NewPassWord'),GetValue('OldPassWord'),GetValue('OID'),"LRP_WarehouseKeeper");							
									Parent.SetValue('Password',CodedPassWord);
									Close();
								]]>
                            </OnClick>
                        </Button>
                        <Button Key="Cancle" Caption="取消" X="2" Y="0">
                            <OnClick>
                                <![CDATA[Close();]]>
                            </OnClick>
                        </Button>
                        <RowDefCollection RowGap="5">
                            <RowDef Height="30px"/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="5">
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="50%"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <SplitSize Size="150px"/>
                    <SplitSize Size="50px"/>
                </SplitPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
    <OnPostShow>
        <![CDATA[
		SetValue("OID",GetPara('OID_para'));
		]]>
    </OnPostShow>
</Form>
