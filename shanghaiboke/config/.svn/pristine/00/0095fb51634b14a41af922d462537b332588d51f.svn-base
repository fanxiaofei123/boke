<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="SwitchOrg" Caption="切换组织机构">
    <QueryCollection>
        <Query Description="查询dispatchdropitems" Key="setDispatchdropitems">
            <Statement>
                <![CDATA[
select l.oid,l.name from LRP_DispatchOrg_OP h join LRP_DispatchOrg l on h.DispatchOrgId=l.oid where h.soid=?
]]>
            </Statement>
        </Query>
        <Query Description="查询WareHousedropitems" Key="setWareHousedropitems">
            <Statement>
                <![CDATA[
select l.oid,l.name from LRP_WarehouseCenter_OP h join LRP_WarehouseCenter l on h.WarehouseCenterId=l.oid where h.soid=?
]]>
            </Statement>
        </Query>
    </QueryCollection>
    <Body>
        <Block>
            <FlexFlowLayoutPanel Key="root" Caption="根面板">
                <ToolBar Key="ToolBar1" Height="pref" Caption="ToolBar1">
                    <ToolBarItemCollection/>
                </ToolBar>
                <GridLayoutPanel Key="first_head" Padding="10px" Height="pref" Caption="基本信息">
                    <Dict Key="CurWarehouseId" Caption="当前仓储中心" BuddyKey="Lab_CurWarehouseId" X="1" Y="0" Enable="false" ItemKey="LRP_WarehouseCenter" XSpan="3">
                        <DataBinding DefaultFormulaValue="getCurOrgID()">
                            <ValueChanged>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanged>
                            <ValueChanging>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanging>
                        </DataBinding>
                    </Dict>
                    <Label Key="Lab_CurWarehouseId" Caption="当前仓储中心" X="0" Y="0"/>
                    <Dict Key="CurDispatchId" Caption="当前调度组织" BuddyKey="Lab_CurDispatchId" X="6" Y="0" Enable="false" ItemKey="LRP_DispatchOrg" XSpan="3">
                        <DataBinding DefaultFormulaValue="getCurDispatchOrgID()">
                            <ValueChanged>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanged>
                            <ValueChanging>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanging>
                        </DataBinding>
                    </Dict>
                    <Label Key="Lab_CurDispatchId" Caption="当前调度组织" X="5" Y="0"/>
                    <Button Key="btn_ok" Caption="确定" X="7" Y="2">
                        <OnClick>
                            <![CDATA[


											Confirm('切换组织机构将关闭当前所有界面，是否继续？','YES_NO',
												{YES:{
CloseAll();
SetSessionPara('OrgID', ToLong(PostWareHouseId));SetSessionPara('DispatchOrgID', ToLong(PostDispatchId));RefreshStatusInfo('LoginInfo');Close()

													},
												NO:{return true;}});]]>
                        </OnClick>
                    </Button>
                    <Button Key="btn_cancel" Caption="取消" X="8" Y="2">
                        <OnClick>
                            <![CDATA[Close();]]>
                        </OnClick>
                    </Button>
                    <ComboBox Key="PostWareHouseId" Caption="切换后仓储中心" BuddyKey="Lab_PostWareHouseId" X="1" Y="1" SourceType="Formula" XSpan="3">
                        <DataBinding DefaultFormulaValue="getCurOrgID()">
                            <ValueChanged>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanged>
                            <ValueChanging>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanging>
                        </DataBinding>
                        <FormulaItems>
                            <![CDATA[DBNamedQuery('setWareHousedropitems',GetOperator())]]>
                        </FormulaItems>
                    </ComboBox>
                    <Label Key="Lab_PostWareHouseId" Caption="切换后仓储中心" X="0" Y="1"/>
                    <ComboBox Key="PostDispatchId" Caption="切换后调度组织" BuddyKey="Lab_PostDispatchId" X="6" Y="1" SourceType="Formula" XSpan="3">
                        <DataBinding DefaultFormulaValue="getCurDispatchOrgID()">
                            <ValueChanged>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanged>
                            <ValueChanging>
                                <![CDATA[
                                
                            ]]>
                            </ValueChanging>
                        </DataBinding>
                        <FormulaItems>
                            <![CDATA[DBNamedQuery('setDispatchdropitems',GetOperator())]]>
                        </FormulaItems>
                    </ComboBox>
                    <Label Key="Lab_PostDispatchId" Caption="切换后调度组织" X="5" Y="1"/>
                    <RowDefCollection RowGap="8">
                        <RowDef Height="25px"/>
                        <RowDef Height="25px"/>
                        <RowDef Height="25px"/>
                        <RowDef Height="25px"/>
                    </RowDefCollection>
                    <ColumnDefCollection ColumnGap="8">
                        <ColumnDef Width="99px"/>
                        <ColumnDef Width="50%"/>
                        <ColumnDef Width="50px"/>
                        <ColumnDef Width="50px"/>
                        <ColumnDef Width="10px"/>
                        <ColumnDef Width="99px"/>
                        <ColumnDef Width="50%"/>
                        <ColumnDef Width="50px"/>
                        <ColumnDef Width="50px"/>
                    </ColumnDefCollection>
                </GridLayoutPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
</Form>
