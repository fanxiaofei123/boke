<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="V_WarehouseKeeper_LRP" Caption="仓管员" FormType="Dict">
    <DataSource RefObjectKey="LRP_WarehouseKeeper"/>
    <QueryCollection>
        <Query Key="GetDefaultOperatorID" Description="读取缺省操作员ID">
            <Statement>
                <![CDATA[
				
				select OID from sys_operator where code='Admin'
				
			]]>
            </Statement>
        </Query>
    </QueryCollection>
    <Body>
        <Block>
            <FlexFlowLayoutPanel Key="main">
                <SplitPanel Key="main_split" Orientation="Vertical" Height="100%">
                    <TabPanel Caption="TabPanel0" Key="TabPanel0">
                        <GridLayoutPanel Key="BasicTab" Padding="10px" Caption="基本信息">
                            <TextEditor Key="Code" Caption="代码" BuddyKey="L_Code" X="1" Y="0" Enable="!ReadOnly()" Tip="「代码」不可为空" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="Code" Required="true"/>
                            </TextEditor>
                            <TextEditor Key="Name" Caption="姓名" BuddyKey="L_Name" X="6" Y="0" Enable="!ReadOnly()" Tip="「姓名」不可为空" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="Name" Required="true"/>
                            </TextEditor>
                            <Label Key="L_Code" Caption="代码" X="0" Y="0"/>
                            <Label Key="L_Name" Caption="姓名" X="5" Y="0"/>
                            <TextEditor Key="Mobile" Caption="手机" BuddyKey="L_Mobile" X="1" Y="1" Enable="!ReadOnly()" Tip="「手机」不可为空" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="Mobile" Required="true"/>
                            </TextEditor>
                            <TextEditor Key="IDCardNo" Caption="身份证" BuddyKey="L_IDCardNo" X="6" Y="1" Enable="!ReadOnly()" Tip="「身份证」不可为空" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="IDCardNo" Required="true"/>
                            </TextEditor>
                            <Label Key="L_Mobile" Caption="手机" X="0" Y="1"/>
                            <Label Key="L_IDCardNo" Caption="身份证" X="5" Y="1"/>
                            <TextEditor Key="ContactAddress" Caption="联系地址" BuddyKey="L_ContactAddress" X="1" Y="2" Enable="!ReadOnly()" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="ContactAddress"/>
                            </TextEditor>
                            <Label Key="L_ContactAddress" Caption="联系地址" X="0" Y="2"/>
                            <ComboBox Key="AppStatus" Caption="App使用状态" BuddyKey="L_AppStatus" X="1" Y="3" Enable="!ReadOnly()" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="AppStatus" DefaultValue="0"/>
                                <Item Caption="离线" Key="0" Value="0"/>
                                <Item Caption="在线" Key="1" Value="1"/>
                            </ComboBox>
                            <Label Key="L_AppStatus" Caption="App使用状态" X="0" Y="3"/>
                            <Button Key="ChangePassword" Caption="修改密码" X="0" Y="5" Enable="!ReadOnly()" XSpan="3">
                                <OnClick>
                                    <![CDATA[
									var id = OID;
									if(IsNew()){ id = -1; }
									SetValue('OIDPara',id);
									ShowModal('V_WHChangePassWord',{OID_para:{OIDPara}});
									]]>
                                </OnClick>
                            </Button>
                            <Image Key="AvatarUrl" Caption="头像" BuddyKey="Lab_AvatarUrl" X="6" Y="3" ImageScaleType="Fit_Center" Stretch="true" XSpan="3" YSpan="2">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="AvatarUrl"/>
                            </Image>
                            <Label Key="Lab_AvatarUrl" Caption="头像" X="5" Y="3"/>
                            <TextEditor Key="OID" Caption="OID" BuddyKey="Lab_OID" X="1" Y="6" Visible="false" Enable="false">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="OID"/>
                            </TextEditor>
                            <Label Key="Lab_OID" Caption="OID" X="0" Y="6"/>
                            <TextEditor Key="OIDPara" Caption="OIDPara" BuddyKey="Lab_OIDPara" X="1" Y="6" Visible="false" Enable="false"/>
                            <Label Key="Lab_OIDPara" Caption="OIDPara" X="0" Y="6"/>
                            <TextEditor Key="Password" Caption="Password" BuddyKey="Lab_Password" X="6" Y="6" Visible="false" Enable="false">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="Password" DefaultValue="40bd001563085fc35165329ea1ff5c5ecbdbbeef"/>
                            </TextEditor>
                            <Label Key="Lab_Password" Caption="Password" X="5" Y="6"/>
                            <TextEditor Key="OperatorID" Caption="OperatorID" BuddyKey="Lab_OperatorID" X="6" Y="6" Visible="false" Enable="false">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="OperatorID" DefaultFormulaValue="GetOperator()"/>
                            </TextEditor>
                            <Label Key="Lab_OperatorID" Caption="OperatorID" X="5" Y="6"/>
                            <Dict Key="WarehouseCenterId" Caption="仓储中心" BuddyKey="Lab_WarehouseCenterId" X="6" Y="2" ItemKey="LRP_WarehouseCenter" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="WarehouseCenterId" Required="true"/>
                            </Dict>
                            <Label Key="Lab_WarehouseCenterId" Caption="仓储中心" X="5" Y="2"/>
                            <TextEditor Key="txt_workgroup" Caption="工作组" BuddyKey="Lab_txt_workgroup" X="1" Y="4" XSpan="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="WorkGroup"/>
                            </TextEditor>
                            <Label Key="Lab_txt_workgroup" Caption="工作组" X="0" Y="4"/>
                            <RowDefCollection RowGap="8">
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                            </RowDefCollection>
                            <ColumnDefCollection ColumnGap="8">
                                <ColumnDef Width="75px"/>
                                <ColumnDef Width="25%"/>
                                <ColumnDef Width="55px"/>
                                <ColumnDef Width="25%"/>
                                <ColumnDef Width="55px"/>
                                <ColumnDef Width="75px"/>
                                <ColumnDef Width="25%"/>
                                <ColumnDef Width="55px"/>
                                <ColumnDef Width="25%"/>
                                <ColumnDef Width="55px"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                        <GridLayoutPanel Key="SystemTab" Padding="10px" Caption="系统信息">
                            <Dict Key="CREATOR" Caption="创建人" X="1" Y="0" ItemKey="Operator">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="CREATOR" DefaultFormulaValue="GetOperator()"/>
                            </Dict>
                            <DatePicker Key="CREATETIME" Caption="创建时间" X="1" Y="1">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="CREATETIME" DefaultFormulaValue="ServerDate()"/>
                            </DatePicker>
                            <Dict Key="MODIFIER" Caption="修改人" X="1" Y="2" ItemKey="Operator">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="MODIFIER" DefaultFormulaValue="GetOperator()"/>
                            </Dict>
                            <DatePicker Key="MODIFYTIME" Caption="修改时间" X="1" Y="3">
                                <DataBinding TableKey="LRP_WarehouseKeeper" ColumnKey="MODIFYTIME" DefaultFormulaValue="ServerDate()"/>
                            </DatePicker>
                            <Label Key="L_CREATOR" Caption="创建人" X="0" Y="0"/>
                            <Label Key="L_CREATETIME" Caption="创建时间" X="0" Y="1"/>
                            <Label Key="L_MODIFIER" Caption="修改人" X="0" Y="2"/>
                            <Label Key="L_MODIFYTIME" Caption="修改时间" X="0" Y="3"/>
                            <RowDefCollection RowGap="8">
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                                <RowDef Height="30px"/>
                            </RowDefCollection>
                            <ColumnDefCollection ColumnGap="8">
                                <ColumnDef Width="55px"/>
                                <ColumnDef Width="100%"/>
                            </ColumnDefCollection>
                        </GridLayoutPanel>
                    </TabPanel>
                    <SplitSize Size="100%"/>
                </SplitPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
    <MacroCollection>
        <Macro Key="GetOperatorID">
            <![CDATA[
			var rst = DBNamedQuery('GetDefaultOperatorID');
			rst.beforefirst();
			rst.next();
			return rst.OID;
		]]>
        </Macro>
    </MacroCollection>
</Form>
