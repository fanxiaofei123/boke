<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Caption="成本分摊明细查询" FormType="View" Key="V_CostApportionLineView">
    <DataSource>
        <DataObject Caption="成本分摊明细" Key="LRP_CostApportionLine" PrimaryTableKey="LRP_CostApportionLine">
            <TableCollection>
                <Table Caption="成本分摊明细" Key="LRP_CostApportionLine" SourceType="Query" TableMode="Detail">
                    <Column Key="OID" Caption="对象标识" DataType="Long"/>
                    <Column Key="SOID" Caption="主对象标识" DataType="Long"/>
                    <Column Key="POID" Caption="父对象标识" DataType="Long"/>
                    <Column Key="VERID" Caption="对象版本" DataType="Integer"/>
                    <Column Key="DVERID" Caption="对象明细版本" DataType="Integer"/>
                    <Column Caption="状态" DataType="Integer" Key="Status"/>
                    <Column Caption="创建人" DataType="Long" Key="CREATOR"/>
                    <Column Caption="创建时间" DataType="DateTime" Key="CREATETIME"/>
                    <Column Caption="修改人" DataType="Long" Key="MODIFIER"/>
                    <Column Caption="修改时间" DataType="DateTime" Key="MODIFYTIME"/>
                    <Column Key="BizType" Caption="业务类型" DataType="Varchar" Length="40"/>
                    <Column Key="ExpenseId" Caption="费用名称" DataType="Long"/>
                    <Column Key="BizDate" Caption="业务日期" DataType="Date"/>
                    <Column Key="ApportionMethod" Caption="分摊方式" DataType="Varchar" Length="40"/>
                    <Column Key="ApportionQty" Caption="分摊量" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="ApportionAmount" Caption="分摊金额" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="SourceAmount" Caption="原费用金额" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="BillOID" Caption="单据ID" DataType="Long"/>
                    <Column Key="BillNo" Caption="单据号" DataType="Varchar" Length="40"/>
                    <Column Key="ParentNo" Caption="相关父单据号" DataType="Varchar" Length="40"/>
                    <Column Key="SourceExpenseLineId" Caption="原费用明细id" DataType="Long"/>
                    <Column Key="SourceBillNo" Caption="原费用单号" DataType="Varchar" Length="40"/>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <Body PopHeight="80%" PopWidth="80%">
        <Block>
            <FlexFlowLayoutPanel Caption="根面板" Key="root">
                <ToolBar Caption="ToolBar1" Height="pref" Key="ToolBar1">
                    <ToolBarItemCollection/>
                </ToolBar>
                <SplitPanel Caption="SplitPanel1" Height="100%" Key="SplitPanel1" Orientation="Vertical">
                    <GridLayoutPanel Caption="基本信息" Height="pref" Key="first_head" Padding="5px">
                        <Dict BuddyKey="L_ExpenseId_C" Caption="费用名称" ItemKey="LRP_DispatchOrg" Key="ExpenseId_C" X="1" XSpan="3" Y="0">
                            <Condition CondSign="in">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="ExpenseId"/>
                            </Condition>
                        </Dict>
                        <Label Caption="费用名称" Key="L_ExpenseId_C" X="0" Y="0"/>
                        <ComboBox BuddyKey="Lab_BizType_C" Caption="业务类型" Key="BizType_C" X="6" XSpan="3" Y="0">
                            <Condition CondSign="=">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="BizType"/>
                            </Condition>
                            <Item Caption="运输调度单分摊至作业单" Key="Dispatch2Job" Value="Dispatch2Job"/>
                        </ComboBox>
                        <Label Caption="业务类型" Key="L_BizType_C" X="5" Y="0"/>
                        <DatePicker Caption="业务日期" Key="BizDate_C" X="1" XSpan="3" Y="1" BuddyKey="L_BizDate">
                            <DataBinding DefaultFormulaValue="Format(ServerDate(),'yyyy-MM-dd')&amp;' 00:00:00'" Required="true"/>
                            <Condition CondSign="between" ColumnKey="BizDate" Group="BizDate" GroupHead="true" TableKey="LRP_CostApportionLine">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="BizDate"/>
                            </Condition>
                        </DatePicker>
                        <Label Caption="业务日期" Key="L_BizDate" X="0" Y="1"/>
                        <DatePicker Caption="至" Key="BizDate_C_1" X="6" XSpan="3" Y="1" BuddyKey="L_BizDate_1">
                            <DataBinding DefaultFormulaValue="Format(ServerDate(),'yyyy-MM-dd')&amp;' 23:59:59'" Required="true"/>
                            <Condition CondSign="none" Group="BizDate" GroupTail="true">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="BizDate"/>
                            </Condition>
                        </DatePicker>
                        <Label Caption="至" Key="L_BizDate_1" X="5" Y="1"/>
                        <Button Caption="查询" Key="Query" X="10" Y="0">
                            <OnClick>
                                <![CDATA[DealCondition();LoadData();ShowData();]]>
                            </OnClick>
                        </Button>
                        <Button Caption="重置" Key="Reset" X="10" Y="1">
                            <OnClick>
                                <![CDATA[ResetCondition();]]>
                            </OnClick>
                        </Button>
                        <DatePicker Caption="创建日期时间" Key="CREATETIME_C" X="1" XSpan="3" Y="2" BuddyKey="L_CREATETIME">
                            <DataBinding DefaultFormulaValue="Format(ServerDate(),'yyyy-MM-dd')&amp;' 00:00:00'" Required="true"/>
                            <Condition CondSign="between" ColumnKey="CREATETIME" Group="CREATETIME" GroupHead="true" TableKey="LRP_CostApportionLine">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="CREATETIME"/>
                            </Condition>
                        </DatePicker>
                        <Label Caption="创建日期时间" Key="L_CREATETIME" X="0" Y="2"/>
                        <DatePicker Caption="至" Key="CREATETIME_C_1" X="6" XSpan="3" Y="2" BuddyKey="L_CREATETIME_1">
                            <DataBinding DefaultFormulaValue="Format(ServerDate(),'yyyy-MM-dd')&amp;' 23:59:59'" Required="true"/>
                            <Condition CondSign="none" Group="CREATETIME" GroupTail="true">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="CREATETIME"/>
                            </Condition>
                        </DatePicker>
                        <Label Caption="至" Key="L_CREATETIME_1" X="5" Y="2"/>
                        <TextEditor Caption="单据号" Key="BillNo_C" X="1" XSpan="3" Y="3">
                            <Condition CondSign="like">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="BillNo"/>
                            </Condition>
                        </TextEditor>
                        <Label Caption="单据号" Key="L_BillNo" X="0" Y="3"/>
                        <TextEditor Caption="相关父单据号" Key="ParentNo_C" X="6" XSpan="3" Y="3">
                            <Condition CondSign="like">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="ParentNo"/>
                            </Condition>
                        </TextEditor>
                        <Label Caption="相关父单据号" Key="L_ParentNo" X="5" Y="3"/>
                        <TextEditor Caption="原费用单号" Key="SourceBillNo_C" X="1" XSpan="3" Y="4">
                            <Condition CondSign="like">
                                <ConditionTarget TableKey="LRP_CostApportionLine" ColumnKey="SourceBillNo"/>
                            </Condition>
                        </TextEditor>
                        <Label Caption="原费用单号" Key="L_SourceBillNo" X="0" Y="4"/>
                        <RowDefCollection RowGap="8">
                            <RowDef Height="25px"/>
                            <RowDef Height="25px"/>
                            <RowDef Height="25px"/>
                            <RowDef Height="25px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                            <RowDef Height="30px"/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="8">
                            <ColumnDef Width="100px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="100px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="30px"/>
                            <ColumnDef Width="80px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <ListView Caption="ListView0" Key="ListView0" TableKey="LRP_CostApportionLine" PageLoadType="DB" Visible="true">
                        <ListViewColumnCollection>
                            <ListViewColumn Caption="对象标识" ColumnType="TextEditor" DataColumnKey="OID" Key="OID" Visible="false"/>
                            <ListViewColumn Key="BizType" Caption="业务类型" ColumnType="ComboBox" DataColumnKey="BizType">
                                <Item Caption="运输调度单分摊至作业单" Key="Dispatch2Job" Value="0"/>
                            </ListViewColumn>
                            <ListViewColumn Caption="费用名称" ColumnType="Dict" DataColumnKey="ExpenseId" ItemKey="LRP_Expense" Key="ExpenseId"/>
                            <ListViewColumn Caption="业务日期" ColumnType="DatePicker" DataColumnKey="BizDate" Key="BizDate"/>
                            <ListViewColumn Caption="创建日期时间" ColumnType="DatePicker" DataColumnKey="CREATETIME" Key="CREATETIME"/>
                            <ListViewColumn Key="ApportionMethod" Caption="分摊方式" ColumnType="ComboBox" DataColumnKey="ApportionMethod">
                                <Item Caption="按数量" Key="qty" Value="qty"/>
                                <Item Caption="按重量" Key="weight" Value="weight"/>
                                <Item Caption="按体积" Key="cubage" Value="cubage"/>
                                <Item Caption="按单据数" Key="count" Value="count"/>
                                <Item Caption="吨公里" Key="tonkilo" Value="tonkilo"/>
                            </ListViewColumn>
                            <ListViewColumn Caption="分摊量" ColumnType="NumberEditor" DataColumnKey="ApportionQty" Key="ApportionQty"/>
                            <ListViewColumn Caption="分摊金额" ColumnType="NumberEditor" DataColumnKey="ApportionAmount" Key="ApportionAmount"/>
                            <ListViewColumn Caption="原费用金额" ColumnType="NumberEditor" DataColumnKey="SourceAmount" Key="SourceAmount"/>
                            <ListViewColumn Caption="单据号" ColumnType="TextEditor" DataColumnKey="BillNo" Key="BillNo"/>
                            <ListViewColumn Caption="相关父单据号" ColumnType="TextEditor" DataColumnKey="ParentNo" Key="ParentNo"/>
                            <ListViewColumn Caption="原费用单号" ColumnType="TextEditor" DataColumnKey="SourceBillNo" Key="SourceBillNo"/>
                        </ListViewColumnCollection>
                    </ListView>
                    <SplitSize Size="180px"/>
                    <SplitSize Size="100%"/>
                </SplitPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
    <OnLoad>
        <![CDATA[
	]]>
    </OnLoad>
</Form>
