<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="V_TransportQuantQuery" Caption="运输中转库存查询" FormType="View">
    <DataSource>
        <DataObject Key="V_TransportQuantQuery" Caption="运输中转库存">
            <TableCollection>
                <Table Key="V_TransportQuantQuery" Caption="运输中转库存" SourceType="Query" TableMode="Detail" Persist="false" OrderBy="No desc">
                    <Column Key="WarehouseCenterId" Caption="仓储中心" DataType="Long"/>
                    <Column Key="OwnerId" Caption="货主" DataType="Long"/>
                    <Column Key="No" Caption="订单号" DataType="Varchar"/>
                    <Column Key="Sequence" Caption="序号" DataType="Integer"/>
                    <Column Key="MaterialName" Caption="物料名称" DataType="Varchar"/>
                    <Column Key="Unit" Caption="单位" DataType="Varchar"/>
                    <Column Key="OnhandQty" Caption="在库量" DataType="Numeric" Precision="18" Scale="6"/>
                    <Column Key="LastRecvDate" Caption="最后入库日期" DataType="Date"/>
                    <Column Key="OwnerNo" Caption="货主单号" DataType="Varchar"/>
                    <Statement>
                        <![CDATA[
					select * from (select Quant.WarehouseCenterId,Quant.OwnerId,O.No,OrderL.Sequence,OrderL.MaterialName,OrderL.Unit,Quant.OnhandQty,Quant.LastRecvDate,O.OwnerNo from LRP_TransportQuant Quant join LRP_TransportMaterial_L OrderL on Quant.TMLOID=OrderL.OID join LRP_TransportOrder_H O on OrderL.SOID=O.OID where Quant.OnhandQty>0)a
						]]>
                    </Statement>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <OperationCollection>
        <Operation Key="Close" Caption="关闭" RefKey="Close"/>
    </OperationCollection>
    <Body>
        <Block>
            <SplitPanel Key="SplitPanel1" Orientation="Vertical" Caption="SplitPanel1">
                <FlexFlowLayoutPanel Key="root" Caption="根面板">
                    <ToolBar Key="ToolBar1" Height="pref" Caption="ToolBar1">
                        <ToolBarItemCollection/>
                    </ToolBar>
                    <GridLayoutPanel Key="first_head" Padding="10px" Height="pref" Caption="基本信息">
                        <Dict Key="TransferOrg" Caption="仓储中心" BuddyKey="Lab_TransferOrg" X="1" Y="0" ItemKey="LRP_WarehouseCenter" XSpan="3" AllowMultiSelection="true">
                            <Condition ColumnKey="WarehouseCenterId" TableKey="V_TransportQuantQuery" CondSign="in"/>
                        </Dict>
                        <Label Key="Lab_TransferOrg" Caption="仓储中心" X="0" Y="0"/>
                        <TextEditor Key="MaterialName" Caption="物料名称" BuddyKey="Lab_MaterialName" X="1" Y="1" XSpan="3">
                            <Condition ColumnKey="MaterialName" TableKey="V_TransportQuantQuery" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_MaterialName" Caption="物料名称" X="0" Y="1"/>
                        <TextEditor Key="No" Caption="订单号" BuddyKey="Lab_No" X="6" Y="1" XSpan="3">
                            <Condition ColumnKey="No" TableKey="V_TransportQuantQuery" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_No" Caption="订单号" X="5" Y="1"/>
                        <TextEditor Key="OwnerNo" Caption="货主单号" BuddyKey="Lab_OwnerNo" X="1" Y="2" XSpan="3">
                            <Condition ColumnKey="OwnerNo" TableKey="V_TransportQuantQuery" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_OwnerNo" Caption="货主单号" X="0" Y="2"/>
                        <Dict Key="OwnerId" Caption="货主" BuddyKey="Lab_OwnerId" X="6" Y="0" XSpan="3" ItemKey="LRP_Owner" AllowMultiSelection="true">
                            <Condition ColumnKey="OwnerId" TableKey="V_TransportQuantQuery" CondSign="in"/>
                        </Dict>
                        <Label Key="Lab_OwnerId" Caption="货主" X="5" Y="0"/>
                        <Button Key="Query" Caption="查询" X="10" Y="0">
                            <OnClick>
                                <![CDATA[DealCondition();LoadData();ShowData();]]>
                            </OnClick>
                        </Button>
                        <Button Key="ReSet" Caption="重置" X="10" Y="1">
                            <OnClick>
                                <![CDATA[ResetCondition();]]>
                            </OnClick>
                        </Button>
                        <RowDefCollection RowHeight="30" RowGap="8">
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="8">
                            <ColumnDef Width="99px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="30px"/>
                            <ColumnDef Width="80px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                </FlexFlowLayoutPanel>
                <ListView Caption="ListView1" Key="ListView1" PageLoadType="DB" RowAlterable="false" TableKey="V_TransportQuantQuery">
                    <ListViewColumnCollection>
                        <ListViewColumn Key="WarehouseCenterId_LV" Caption="仓储中心" ColumnType="Dict" DataColumnKey="WarehouseCenterId" ItemKey="LRP_WarehouseCenter"/>
                        <ListViewColumn Key="OwnerId_LV" Caption="货主" ColumnType="Dict" DataColumnKey="OwnerId" ItemKey="LRP_Owner"/>
                        <ListViewColumn Key="No_LV" Caption="运输订单号" ColumnType="TextEditor" DataColumnKey="No"/>
                        <ListViewColumn Key="Sequence_LV" Caption="明细序号" ColumnType="NumberEditor" DataColumnKey="Sequence" Precision="12" Scale="0"/>
                        <ListViewColumn Key="MaterialName_LV" Caption="物料名称" ColumnType="TextEditor" DataColumnKey="MaterialName"/>
                        <ListViewColumn Key="Unit_LV" Caption="单位" ColumnType="TextEditor" DataColumnKey="Unit"/>
                        <ListViewColumn Key="Qty_LV" Caption="在库量" ColumnType="NumberEditor" DataColumnKey="OnhandQty" Precision="15" Scale="3" ShowZero="true"/>
                        <ListViewColumn Key="TransferInTime_LV" Caption="最后入库日期" DataColumnKey="LastRecvDate" ColumnType="DatePicker" OnlyDate="true" Format="yyyy-MM-dd"/>
                    </ListViewColumnCollection>
                </ListView>
                <SplitSize Size="160px"/>
                <SplitSize Size="100%"/>
            </SplitPanel>
        </Block>
    </Body>
</Form>
