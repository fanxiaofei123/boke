<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Caption="复合字典编辑" FormulaAbbrCaption="Para('EntryCaption')" FormulaCaption="Para('EntryCaption')" Key="CompDictEdit">
    <OperationCollection>
        <OperationCollection Caption="新增(N)" Key="NewCompDict" SelfDisable="true" Visible="!Container.IsNewOrEdit()">
            <Operation Caption="新增(N)" Expand="true" ExpandSource="GetFormRelation(Para('FormKey'))" Key="NewDict" >
                <Action><![CDATA[
					NewDict(GetTag());SetEnable('DictView',false);ClearSelection('DictView')	
				]]></Action>
            </Operation>
        </OperationCollection>
        <Operation Caption="修改(M)" Enable="GetSelectedValue('DictView','OID') &gt; 0" Key="Modify" ShortCuts="Ctrl+M" Visible="!Container.IsNewOrEdit()">
            <Action><![CDATA[
				Container.Edit();SetEnable('DictView',false)	
			]]></Action>
        </Operation>
        <Operation Caption="保存(S)" Key="Save" ShortCuts="Ctrl+S" Visible="Container.IsNewOrEdit()">
            <Action><![CDATA[
				Container.Save();RefreshDictView('DictView',Container.GetDataObjectKey(),Container.GetOID(),Container.GetInitOperationState());SetEnable('DictView',true)	
			]]></Action>
        </Operation>
        <Operation Caption="取消(Z)" Key="Cancel" ShortCuts="Ctrl+Z" Visible="Container.IsNewOrEdit()">
            <Action><![CDATA[
				Container.Cancel();SetEnable('DictView',true)	
			]]></Action>
        </Operation>
    </OperationCollection>
    <Body>
        <Block>
            <FlexFlowLayoutPanel Key="main">
                <ToolBar Height="pref" Key="main_toolbar">
                    <ToolBarItemCollection/>
                </ToolBar>
                <SplitPanel Height="100%" Key="Split">
                    <FlexFlowLayoutPanel Key="p1">
                        <DictView FormulaItemKey="GetDataObjectKey(Para('FormKey'))" Height="100%" Key="DictView">
                            <FocusRowChanged><![CDATA[
							
								OpenDict(GetRelationFormKey(Para('FormKey'),GetSelectedValue('DictView','ItemKey')),GetSelectedValue('DictView','OID'),'Container')
							
						]]></FocusRowChanged>
                        </DictView>
                    </FlexFlowLayoutPanel>
                    <Container Key="Container" Style="Stack"/>
                    <SplitSize Size="30%"/>
                    <SplitSize Size="70%"/>
                </SplitPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
</Form>
