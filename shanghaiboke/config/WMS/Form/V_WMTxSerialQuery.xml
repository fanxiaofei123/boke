<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="V_WMTxSerialQuery" Caption="序列号事务查询" FormType="View">
    <DataSource>
        <DataObject Key="V_WMTxSerialQuery" Caption="序列号事务查询">
            <TableCollection>
                <Table Key="V_WMTxSerial" Caption="序列号事务查询" SourceType="Query" TableMode="Detail">
                    <Column Key="WarehouseCenterId" DataType="Long" Caption="仓储中心"/>
                    <Column Key="OwnerId" Caption="货主" DataType="Long"/>
                    <Column Key="Status" Caption="单头状态" DataType="Integer"/>
                    <Column Key="Status_L" Caption="明细状态" DataType="Varchar"/>
                    <Column Key="TxTypeCode" Caption="事务代码" DataType="Varchar"/>
                    <Column Key="No" Caption="事务单号" DataType="Varchar"/>
                    <Column Key="NoticeNo" Caption="通知单号" DataType="Varchar"/>
                    <Column Key="MaterialId" Caption="物料" DataType="Long"/>
                    <Column Key="TxDateTime" Caption="事务日期" DataType="DateTime"/>
                    <Column Key="OwnerNo" Caption="货主单号" DataType="Varchar"/>
                    <Column Key="SerialNo" Caption="序列号" DataType="Varchar"/>
                    <Column Key="Sequence" Caption="物料明细序号" DataType="Integer"/>
                    <Statement>
                        <![CDATA[select h.WarehouseCenterId,h.OwnerId,h.Status,h.TxTypeCode,h.No,h.NoticeNo,h.TxDateTime,h.OwnerNo,l.MaterialId,l.Sequence, l.Status as Status_L, sl.SerialNo from LRP_WMTx_H h join LRP_WMTxSerial_L sl on h.oid=sl.soid join LRP_WMTx_L l on h.oid=l.soid]]>
                    </Statement>
                </Table>
            </TableCollection>
            <OIDFilter/>
        </DataObject>
    </DataSource>
    <OperationCollection>
        <Operation Key="Close" Caption="关闭" RefKey="Close"/>
    </OperationCollection>
    <Body>
        <Block>
            <SplitPanel Key="SplitPanel1" Orientation="Vertical" Caption="SplitPanel1">
                <FlexFlowLayoutPanel Key="root" Caption="根面板">
                    <ToolBar Key="ToolBar1" Height="pref" Caption="ToolBar1">
                        <ToolBarItemCollection/>
                    </ToolBar>
                    <GridLayoutPanel Key="first_head" Padding="10px" Height="pref" Caption="基本信息">
                        <Dict Key="WarehouseCenterId" Caption="仓储中心" BuddyKey="Lab_WarehouseCenterId" X="1" Y="0" ItemKey="LRP_WarehouseCenter" XSpan="3" AllowMultiSelection="true">
                            <Condition ColumnKey="WarehouseCenterId" TableKey="V_WMTxSerial" CondSign="in"/>
                        </Dict>
                        <Label Key="Lab_WarehouseCenterId" Caption="仓储中心" X="0" Y="0"/>
                        <Dict Key="OwnerId" Caption="货主" BuddyKey="Lab_OwnerId" X="6" Y="0" ItemKey="LRP_Owner" XSpan="3" AllowMultiSelection="true">
                            <Condition ColumnKey="OwnerId" TableKey="V_WMTxSerial" CondSign="in"/>
                        </Dict>
                        <Label Key="Lab_OwnerId" Caption="货主" X="5" Y="0"/>
                        <CheckListBox BuddyKey="Lab_Status" Caption="单头状态" Key="Status" X="1" Y="1" XSpan="3">
                            <Condition ColumnKey="Status" TableKey="V_WMTxSerial" CondSign="in" Target="h.Status"/>
                            <Item Caption="已输入" Key="prepared" Value="100"/>
                            <Item Caption="已确认" Key="confirmed" Value="200"/>
                            <Item Caption="已收货" Key="received" Value="320"/>
                            <Item Caption="已上架" Key="putaway" Value="340"/>
                            <Item Caption="已拣货" Key="picked" Value="600"/>
                            <Item Caption="已发货" Key="shipped" Value="440"/>
                            <Item Caption="已提货" Key="took-delivery" Value="510"/>
                            <Item Caption="已发运" Key="dispatched" Value="520"/>
                            <Item Caption="已中转" Key="transfered" Value="530"/>
                            <Item Caption="已到站" Key="org-arrived" Value="540"/>
                            <Item Caption="已配送" Key="distributed" Value="550"/>
                            <Item Caption="已签收" Key="signed" Value="560"/>
                            <Item Caption="已回单" Key="returned" Value="570"/>
                            <Item Caption="已发车" Key="departed" Value="620"/>
                            <Item Caption="已到达" Key="arrived" Value="640"/>
                            <Item Caption="已完成" Key="finished" Value="900"/>
                            <Item Caption="处理中" Key="handled" Value="500"/>
                            <Item Caption="已建波" Key="waved" Value="300"/>
                        </CheckListBox>
                        <Label Key="Lab_Status" Caption="单头状态" X="0" Y="1"/>
                        <CheckListBox BuddyKey="Lab_Status_L" Caption="明细状态" Key="Status_L" X="6" XSpan="3" Y="1">
                            <Condition ColumnKey="Status_L" TableKey="V_WMTxSerial" CondSign="in" Target="l.Status"/>
                            <Item Caption="已作废" Key="cancelled" Value="20"/>
                            <Item Caption="已输入" Key="prepared_L" Value="10"/>
                            <Item Caption="已完成" Key="finished_L" Value="90"/>
                            <Item Caption="处理中" Key="handled_L" Value="50"/>
                        </CheckListBox>
                        <Label Key="Lab_Status_L" Caption="明细状态" X="5" Y="1"/>
                        <TextEditor Key="No" Caption="事务单号" BuddyKey="Lab_No" X="6" Y="2" XSpan="3">
                            <Condition ColumnKey="No" TableKey="V_WMTxSerial" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_No" Caption="事务单号" X="5" Y="2"/>
                        <TextEditor Key="TxTypeCode" Caption="事务代码" BuddyKey="Lab_TxTypeCode" X="1" Y="2" XSpan="3">
                            <Condition ColumnKey="TxTypeCode" TableKey="V_WMTxSerial" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_TxTypeCode" Caption="事务代码" X="0" Y="2"/>
                        <TextEditor Key="NoticeNo" Caption="通知单号" BuddyKey="Lab_NoticeNo" X="1" Y="3" XSpan="3">
                            <Condition ColumnKey="NoticeNo" TableKey="V_WMTxSerial" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_NoticeNo" Caption="通知单号" X="0" Y="3"/>
                        <Dict Key="MaterialId" Caption="物料" BuddyKey="Lab_MaterialId" X="6" Y="3" ItemKey="LRP_Material" XSpan="3">
                            <Condition ColumnKey="MaterialId" TableKey="V_WMTxSerial" CondSign="="/>
                        </Dict>
                        <Label Key="Lab_MaterialId" Caption="物料" X="5" Y="3"/>
                        <DatePicker Key="TxDateTimeFrom" Caption="事务日期" BuddyKey="Lab_TxDateTimeFrom" X="1" Y="4" XSpan="3">
                            <Condition ColumnKey="TxDateTime" TableKey="V_WMTxSerial" CondSign="between" Group="TxDateTime" GroupHead="true"/>
                        </DatePicker>
                        <Label Key="Lab_TxDateTimeFrom" Caption="事务日期" X="0" Y="4"/>
                        <DatePicker Key="TxDateTimeTo" Caption="事务日期" BuddyKey="Lab_TxDateTimeTo" X="6" Y="4" XSpan="3">
                            <Condition ColumnKey="TxDateTime" TableKey="V_WMTxSerial" CondSign="in" GroupTail="true" Group="TxDateTime"/>
                        </DatePicker>
                        <Label Key="Lab_TxDateTimeTo" Caption="至" X="5" Y="4"/>
                        <Button Key="Query" Caption="查询" X="10" Y="0">
                            <OnClick>
                                <![CDATA[DealCondition();LoadData();ShowData();]]>
                            </OnClick>
                        </Button>
                        <Button Key="ReSet" Caption="重置" X="10" Y="1">
                            <OnClick>
                                <![CDATA[ResetCondition();]]>
                            </OnClick>
                        </Button>
                        <RowDefCollection RowHeight="30" RowGap="8">
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="8">
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="55px"/>
                            <ColumnDef Width="25%"/>
                            <ColumnDef Width="30px"/>
                            <ColumnDef Width="80px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                </FlexFlowLayoutPanel>
                <ListView Caption="ListView1" Key="ListView1" PageLoadType="DB" RowAlterable="false" TableKey="V_WMTxSerial">
                    <ListViewColumnCollection>
                        <ListViewColumn Key="WarehouseCenterId_LV" Caption="仓储中心" ColumnType="Dict" DataColumnKey="WarehouseCenterId" ItemKey="LRP_WarehouseCenter"/>
                        <ListViewColumn Key="OwnerId_LV" Caption="货主" ColumnType="Dict" DataColumnKey="OwnerId" ItemKey="LRP_Owner"/>
                        <ListViewColumn Key="No_LV" Caption="事务单号" ColumnType="TextEditor" DataColumnKey="No"/>
                        <ListViewColumn Key="OwnerNo_LV" Caption="货主单号" ColumnType="TextEditor" DataColumnKey="OwnerNo"/>
                        <ListViewColumn Key="NoticeNo_LV" Caption="通知单号" ColumnType="TextEditor" DataColumnKey="NoticeNo"/>
                        <ListViewColumn Key="TxDateTime" Caption="事务日期时间" ColumnType="DatePicker" DataColumnKey="TxDateTime"/>
                        <ListViewColumn Key="MaterialId_LV" Caption="物料" ColumnType="Dict" DataColumnKey="MaterialId" ItemKey="LRP_Material"/>
                        <ListViewColumn Key="SerialNo" Caption="序列号" ColumnType="TextEditor" DataColumnKey="SerialNo"/>
                        <ListViewColumn Key="Sequence" Caption="物料明细序号" ColumnType="NumberEditor" DataColumnKey="Sequence" Precision="15" Scale="0"/>
                    </ListViewColumnCollection>
                </ListView>
                <SplitSize Size="240px"/>
                <SplitSize Size="100%"/>
            </SplitPanel>
        </Block>
    </Body>
</Form>
