<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Form Key="V_ExchangeItemQuery" Caption="用户积分兑换记录查询" FormType="Report">
    <DataSource>
        <DataObject Key="V_ExchangeItemQuery" Caption="用户积分兑换记录查询" PrimaryTableKey="V_ExchangeItemQuery">
            <TableCollection>
                <Table Key="V_ExchangeItemQuery" Caption="用户积分兑换记录查询" TableMode="Detail" SourceType="Query" Persist="false">
                    <Column Key="ouname" Caption="用户名" DataType="Varchar" Length="40"/>
                    <Column Key="upeino" Caption="项目号" DataType="Varchar" Length="40"/>
                    <Column Key="upeiname" Caption="项目名称" DataType="Varchar" Length="40"/>
                    <Column Key="Qty" Caption="兑换数量" DataType="Numeric" Precision="18" Scale="0"/>
                    <Column Key="Points" Caption="积分" DataType="Numeric" Precision="18" Scale="0"/>
                    <Column Caption="兑换日期时间" DataType="DateTime" Key="ExchangeTime"/>
                    <Statement>
                        <![CDATA[
                            select * from (select ou.name as ouname,upei.no as upeino,upei.name as upeiname,h.ExchangeTime,h.Qty,h.Points from LRP_UPE_Records_H h join USER_Operator ou on h.OwnerUserId=ou.OID join LRP_UPExchangeItem_H upei on h.UPEItemId=upei.OID) t
                        ]]>
                    </Statement>
                </Table>
            </TableCollection>
        </DataObject>
    </DataSource>
    <Body>
        <Block>
            <FlexFlowLayoutPanel Key="main" Caption="根面板">
                <ToolBar Key="main_toolbar" Height="pref" Caption="main_toolbar">
                    <ToolBarItemCollection/>
                </ToolBar>
                <SplitPanel Key="SplitPanel1" Orientation="Vertical" Height="100%" Caption="SplitPanel1">
                    <GridLayoutPanel Key="first_head" Padding="5px" Height="pref" Caption="基本信息">
                        <TextEditor Key="username" Caption="用户名" BuddyKey="Lab_username" X="1" Y="0">
                            <Condition ColumnKey="ouname" TableKey="V_ExchangeItemQuery" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_username" Caption="用户名" X="0" Y="0"/>
                        <TextEditor Key="upeiname" Caption="积分项目名称" BuddyKey="Lab_upeiname" X="4" Y="0">
                            <Condition ColumnKey="upeiname" TableKey="V_ExchangeItemQuery" CondSign="like"/>
                        </TextEditor>
                        <Label Key="Lab_upeiname" Caption="积分项目名称" X="3" Y="0"/>
                        <Button Key="btn_ok" Caption="查询" X="6" Y="0">
                            <OnClick>
                                <![CDATA[DealCondition();LoadData();ShowData();]]>
                            </OnClick>
                        </Button>
                        <Button Key="btn_reset" Caption="重置" X="6" Y="1">
                            <OnClick>
                                <![CDATA[ResetCondition();]]>
                            </OnClick>
                        </Button>
                        <DatePicker Key="exchangetimefrom" Caption="兑换日期时间" BuddyKey="Lab_exchangetimefrom" X="1" Y="1">
                            <Condition Group="ExchangeTime" ColumnKey="ExchangeTime" TableKey="V_ExchangeItemQuery" CondSign="between" GroupHead="true"/>
                        </DatePicker>
                        <Label Key="Lab_exchangetimefrom" Caption="兑换日期时间" X="0" Y="1"/>
                        <DatePicker Key="exchangetimeto" Caption="至" BuddyKey="Lab_exchangetimeto" X="4" Y="1">
                            <Condition Group="ExchangeTime" GroupTail="true" ColumnKey="ExchangeTime" TableKey="V_ExchangeItemQuery" CondSign="in"/>
                        </DatePicker>
                        <Label Key="Lab_exchangetimeto" Caption="至" X="3" Y="1"/>
                        <RowDefCollection RowHeight="30" RowGap="6">
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                            <RowDef/>
                        </RowDefCollection>
                        <ColumnDefCollection ColumnGap="20">
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="10px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="50%"/>
                            <ColumnDef Width="10px"/>
                            <ColumnDef Width="80px"/>
                            <ColumnDef Width="10px"/>
                        </ColumnDefCollection>
                    </GridLayoutPanel>
                    <Grid Key="Grid1" Caption="Grid1" NewEmptyRow="false" Enable="false" Height="100%" PageLoadType="DB" CanDelete="false" CanInsert="false" CanShift="false">
                        <GridColumnCollection>
                            <GridColumn Key="ouname_L" Caption="用户名" Width="80px" Sortable="true"/>
                            <GridColumn Key="upeino_L" Caption="兑换项目号" Width="80px" Sortable="true"/>
                            <GridColumn Key="upeiname_L" Caption="兑换项目名称" Width="80px" Sortable="true"/>
                            <GridColumn Key="exchangedatetime_L" Caption="兑换日期时间" Width="80px" Sortable="true"/>
                            <GridColumn Key="qty_l" Caption="兑换数量" Width="80px" Sortable="true"/>
                            <GridColumn Key="Points_L" Caption="兑换总积分" Width="80px" Sortable="true"/>
                        </GridColumnCollection>
                        <GridRowCollection>
                            <GridRow Key="row1" RowHeight="35" TableKey="V_ExchangeItemQuery">
                                <GridCell Key="ouname_L" Caption="用户名" CellType="TextEditor">
                                    <DataBinding ColumnKey="ouname"/>
                                </GridCell>
                                <GridCell Key="upeino_L" Caption="兑换项目号" CellType="TextEditor">
                                    <DataBinding ColumnKey="upeino"/>
                                </GridCell>
                                <GridCell Key="upeiname_L" Caption="兑换项目名称" CellType="TextEditor">
                                    <DataBinding ColumnKey="upeiname"/>
                                </GridCell>
                                <GridCell Key="exchangedatetime_L" Caption="兑换日期时间" CellType="DatePicker">
                                    <DataBinding ColumnKey="ExchangeTime"/>
                                </GridCell>
                                <GridCell Key="qty_l" Caption="兑换数量" CellType="NumberEditor">
                                    <DataBinding ColumnKey="Qty"/>
                                </GridCell>
                                <GridCell Key="Points_L" Caption="兑换总积分" CellType="NumberEditor">
                                    <DataBinding ColumnKey="Points"/>
                                </GridCell>
                            </GridRow>
                        </GridRowCollection>
                    </Grid>
                    <SplitSize Size="85px"/>
                    <SplitSize Size="100px"/>
                </SplitPanel>
            </FlexFlowLayoutPanel>
        </Block>
    </Body>
</Form>
